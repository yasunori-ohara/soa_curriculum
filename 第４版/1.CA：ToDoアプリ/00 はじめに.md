# 00 はじめに

# 🚀 TODOアプリの構築を始めよう

🚀 **いよいよ、最初の題材であるシンプルな「TODOアプリ」を作っていきます。**

なぜTODOアプリなのか？

それは、**入力・表示・ビジネスロジック**というアプリの基本要素をすべて含み、クリーンアーキテクチャの考え方を学ぶのに最適だからです。

このアプリを構築する過程で、私たちはクリーンアーキテクチャの設計思想を、理論ではなく**実践を通して体感**していきます。

---

### 🗺 私たちが使う「設計図」

このカリキュラムでは、道に迷わないように「フローのクラス図」と呼ばれる設計図を使います。
これは、これから作る各部品とその役割を示した“地図”です。

![クリーンアーキテクチャ](../クリーンアーキテクチャ.png)

今はまだ、この図のすべての箱や矢印の意味が分からなくても問題ありません。

重要なのは、この設計図が「ユーザーの操作がどのように処理され、結果として画面に表示されるか」という**処理の流れ**を示していることです。

これから私たちは、この設計図の左側にある **`View` や `Controller`** から順番に、一つずつの部品を「これは何をする場所か？」を確認しながら、まるで地図をなぞるように実装していきます。

---

### 📂 プロジェクトの構成

まず、これから作るTODOアプリのフォルダ構成を準備しましょう。
この構成は、設計図の役割分担をそのまま反映した、**クリーンアーキテクチャ準拠構成**です。

```
clean_architecture_todo/
├─ core/
│   ├─ domain/
│   │   ├─ todo.py                 # <E> Entity（ビジネスルールの本体）
│   │   ├─ repository.py           # <I> Repository 抽象（データアクセス契約）
│   │   └─ errors.py               # ドメイン固有エラー（必要に応じて）
│   │
│   └─ usecase/
│       ├─ interactor/
│       │   └─ create_todo.py      # UseCase本体（Interactor: TodoUseCase）
│       └─ boundary/
│           ├─ input_boundary.py   # <I> InputBoundary（Controllerが呼ぶ）
│           ├─ output_boundary.py  # <I> OutputBoundary（Presenterが実装）
│           └─ dto.py              # <DS> DataStructure（Input/Output/ViewModel）
│
├─ interface_adapters/
│   ├─ presenters/
│   │   └─ todo_presenter.py       # Presenter（OutputBoundary実装）
│   ├─ controllers/
│   │   └─ todo_controller.py      # Controller（Viewが呼ぶ）
│   └─ views/
│       ├─ view_console.py         # View（コンソール版）
│       └─ view_gui.py             # View（GUI版）
│
├─ infrastructure/
│   └─ repositories/
│       ├─ in_memory_todo_repository.py   # Repositoryの具体実装（メモリ版）
│       └─ postgres_todo_repository.py    # Repositoryの具体実装（DB版）
│
├─ tests/
│   └─ unit/
│       ├─ test_todo_usecase.py
│       ├─ test_presenter.py
│       ├─ test_controller.py
│       ├─ test_view_console.py
│       ├─ test_in_memory_todo_repository.py
│       └─ test_view_gui.py
│
└─ main.py                           # Composition Root（依存注入・起動）
```

---

### 🧩 各フォルダの役割

| フォルダ                                 | 役割                                      | クラス図対応                                          |
| ------------------------------------ | --------------------------------------- | ----------------------------------------------- |
| **`core/domain`**                    | アプリの心臓部。TODOのビジネスルールやEntityを定義。         | `<E>` Entity, `<I>Repository`                   |
| **`core/usecase/interactor`**        | ユースケース（アプリの目的ごとの処理）を実装。                 | Interactor                                      |
| **`core/usecase/boundary`**          | UIとの会話の契約（Input/OutputBoundary・DTO）を定義。 | `<I>InputBoundary`, `<I>OutputBoundary`, `<DS>` |
| **`interface_adapters/controllers`** | ユーザー入力を受け取り、InputBoundaryを呼ぶ。           | Controller                                      |
| **`interface_adapters/presenters`**  | UseCase出力を受け取り、View表示形式に整える。            | Presenter                                       |
| **`interface_adapters/views`**       | 実際の出力（CLI・GUI・Webなど）。                   | View                                            |
| **`infrastructure`**                 | DBや外部API、ファイルI/Oなどの現実層。                 | Frameworks & Drivers                            |
| **`main.py`**                        | すべての依存関係をつなぐ起動スクリプト。                    | Composition Root                                |

---

### ✅ この構成の効果

1. **設計図（クラス図）との対応が完全一致**
   → `<DS>`, `<I>InputBoundary`, `<I>OutputBoundary`, `<I>Repository` などが明示的。

2. **用語の直感性が高い**
   → “boundary” は「境界」を意味し、UIとUseCaseの線引きを理解しやすい。

3. **教材としての発展性を確保**
   → 第2巡で「Port/Adapter」命名に変更し、ヘキサゴナルアーキテクチャに自然に発展可能。

---

## 💬 用語集

| 用語                                            | 説明                                                                                                                 |
| --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |
| **DTO（データ転送オブジェクト）**                          | 「境界を渡すためのデータの箱」。入力や出力をまとめて渡すための入れ物です。                                                                              |
| **Boundary（バウンダリ）**                           | 「境界の取り決め」。UI層が呼び出す側を **InputBoundary**、結果を受け取る側を **OutputBoundary** と呼びます。どんなデータを渡し、どんな返り値を返すかの**約束（インターフェース）**です。 |
| **Repository（リポジトリ）**                         | データの出し入れを行う「保存担当クラス」。実際の保存先（ファイルやDB）は知らないで動けるようにします。                                                               |
| **依存性逆転（DIP：Dependency Inversion Principle）** | 「上位のルールが下位の技術に依存しないようにする」考え方。つまり、「内側は外側を知らない」ように作ります。                                                              |

> これらの言葉は、以降の章で再登場します。

---

### ✅ 次のステップ

準備は整いました。
ここからは、アプリの**心臓部**である `core/domain/todo.py` を作り、ビジネスルールをコードに落とし込んでいきましょう。

