# 00 はじめに

# 🏛️ はじめに

これまでの学習（CA, SOA, DDD戦術パターン連携例）を通じて、私たちは「どのように（How）」ソフトウェアを構築するか、という技術的な側面を深く学んできました。しかし、優れたソフトウェアを作るためには、「何を（What）」作るべきか、つまり**扱うべきドメイン（ビジネスの問題領域）**を深く理解し、それを効果的にモデル化するスキルが不可欠です。

このセクションでは、**ドメインモデリング**に焦点を当てた演習を行います。これは、DDD（ドメイン駆動設計）の考え方、特に**戦略的設計**の視点も取り入れながら、ドメインの複雑さを読み解き、それを**戦術的パターン**（エンティティ、値オブジェクト、集約など）を使ってコードに落とし込む練習です。

---

## 🎯 この演習のゴール

- ドメイン（身近な業務や興味のある分野）を分析し、その中核となる概念やルールを発見するスキルを養う。
- **ユビキタス言語**を意識し、ドメインエキスパート（あるいは自分自身の中のドメイン知識）との対話を通じてモデルを洗練させるプロセスを体験する。
- **境界づけられたコンテキスト**の考え方を適用し、ドメインを適切に分割する視点を身につける。
- 戦術的設計パターン（エンティティ、値オブジェクト、集約など）を、分析したドメインに対して**適切に選択・適用**する判断力を養う。

---

## 🧭 なぜドメインモデリング演習なのか？ (他の選択肢との比較)

DDDの理解を深める方法として、既存コードのリファクタリングや、CQRS・イベントソーシングといった高度なアーキテクチャパターンを学ぶことも考えられます。しかし、その前にドメインモデリング演習を行うことには、以下の重要な意味があります。

### 1. DDD思考の基礎固め

CQRS（コマンド・クエリ責務分離）やイベントソーシングは、特定の課題（例：読み取り性能の最適化、状態変更履歴の完全な追跡）を解決するための強力な「アーキテクチャパターン」です。しかし、これらを効果的に適用するためには、その土台となる**ドメインモデル自体が適切に設計されている**ことが前提となります。

ドメインモデリング演習を通じて、

- 「そもそも、このビジネスにおける重要な概念（集約）は何か？」
- 「どこでコンテキスト（≒サービス境界）を区切るのが自然か？」
- 「このルールはエンティティ、値オブジェクト、ドメインサービスのどれで表現すべきか？」
といった、DDDの**根幹となる思考プロセス**を実践的に学ぶことができます。これは、CQRSなどの応用パターンに進む前の重要な基礎固めとなります。

### 2. リファクタリングへの応用

既存コードのリファクタリングを行う際にも、ドメインモデリングの視点は不可欠です。単に戦術的パターン（値オブジェクトの導入など）を適用するだけでなく、

- 「このコードが扱っているドメイン概念は何か？（**ユビキタス言語**）」
- 「このモジュールは、本来どの**境界づけられたコンテキスト**に属するべきか？」
- 「データの一貫性を保つべき単位（**集約**）はどこか？」

といったドメインへの深い理解に基づいてリファクタリングを行うことで、コードはより本質的に改善されます。ドメインモデリング演習は、この「ドメインを読み解く力」を養います。

---

## 📖 この演習の進め方

1. **題材の選択**:
まず、モデル化したいドメイン（例：オンライン書店、ブログシステム、会議室予約システムなど、身近で理解しやすいもの）を選びます。
2. **ユビキタス言語の洗い出し**:
そのドメインで使われる重要な言葉（名詞、動詞）をリストアップし、意味を定義します。（もしドメインエキスパートがいれば対話しますが、いなければ自分で知識を整理します）
3. **境界づけられたコンテキストの検討**:
（もし題材が大きければ）どこで関心事が変わるか、言葉の意味が変わるかを考え、コンテキストを分割してみます。
4. **戦術的パターンの適用**:
各コンテキスト（またはドメイン全体）の中心となる概念を、エンティティ、値オブジェクト、集約としてモデル化します。それらの関係性、振る舞い（メソッド）、不変条件を定義します。必要に応じてリポジトリ、ドメインサービス、ファクトリなども設計します。
5. **コード化（一部）**:
設計したモデルの一部を、実際にPythonのクラスとしてコードに落とし込んでみます。これにより、設計の曖昧な点や改善点が見えてきます。

この演習は「完璧なモデルを作ること」が目的ではありません。DDDの考え方を使ってドメインを分析し、モデルに落とし込むという「**思考プロセス**」を体験し、練習することが重要です。