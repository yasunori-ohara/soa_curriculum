# 01 ドメインイベントの洗い出し

# ステップ１：ドメインイベントの洗い出し 🌧️

最初のステップは、会議室を予約するプロセスの中で「**ビジネス上意味のある出来事**」をできるだけ多く洗い出すことです。

**ポイント**:

- 必ず**過去形**（〜された）で書きます。
- 技術的な詳細（例：DBに書き込まれた）ではなく、**ビジネスの言葉**（ユビキタス言語）を使います。
- 思いつく限り、粒度は気にせずたくさん出してみましょう。

---

## 🤔 会議室を予約するとき、何が起こる？

ユーザーが会議室を使いたいと思ってから、予約が完了する（あるいは失敗する）までの間に、どんな「出来事」が発生するでしょうか？

**イベント候補（ブレインストーミング）:**

- 会議室が検索された (Rooms Searched?)
- 空き時間が表示された (Availability Displayed?) - *これは出来事か？状態表示か？*
- 予約が試みられた (Booking Attempted?)
- **会議室が予約された (Room Booked / Reservation Made)** - *これは重要そう！*
- 予約が重複した (Booking Conflicted / Overlapped) - *失敗ケース*
- 予約可能時間外が指定された (Time Outside Bookable Hours Selected) - *失敗ケース*
- 指定された会議室が存在しなかった (Room Not Found) - *失敗ケース*
- 予約内容が確認された (Booking Confirmed - by user?)
- 予約者に通知が送信された (Notification Sent?) - *副作用かも？*
- カレンダーに予定が追加された (Calendar Updated?) - *副作用かも？*
- 予約がキャンセルされた (Reservation Cancelled) - *予約後の出来事*

---

## 📝 主要なドメインイベントの選択

ブレインストーミングした候補の中から、特にドメインの核となる、状態変化を表すような**重要な出来事**を選び出します。

**主要ドメインイベント (候補):**

1. `[会議室が予約された (Room Booked)]`
    - これが予約プロセスの主要な成功イベントです。
2. `[予約が失敗した (Booking Failed)]`
    - 失敗には様々な理由（重複、時間外、存在しない）がありますが、まずは一つのイベントとして捉えることもできます。（後で理由を含めるか、別々のイベントにするか検討）
3. `[予約がキャンセルされた (Reservation Cancelled)]`
    - 予約後のライフサイクルにおける重要なイベントです。

今回は、まず **`[会議室が予約された]`** という中心的なイベントに注目して、次のステップに進むのが良さそうです。

---

## ➡️ 次へ

主要なドメインイベントとして `[会議室が予約された]` を特定しました。
次は、「**(Step 2) イベントの時系列化とコマンド/トリガーの追加**」に進み、このイベントが「何によって」引き起こされるのかを考えてみましょう。