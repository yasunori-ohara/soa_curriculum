## 4大基本原則

SOAの根幹をなす**「4大基本原則」**について解説します。
この4つを理解することが、良いサービス指向アーキテクチャを設計するための第一歩です。

---

### 🗺️  1. サービスは明確な境界を持つ (Services have explicit boundaries)

これは「サービスとは何か」を定義する最も基本的な原則です。サービスは単なる機能の集まりではなく、**明確なビジネス上の目的と責任範囲**を持たなければなりません。サービスの利用者は、その内部構造（どう実装されているか）を知る必要はなく、公開された機能だけにアクセスします。

* **たとえるなら…**
    レストランの厨房です。客（サービスの利用者）は、厨房の中でどんな調理器具が使われ、シェフがどんな手順で料理しているか（実装の詳細）を知る必要はありません。「メニュー（公開された機能）」を見て注文すれば、料理が出てきます。厨房と客席の間には明確な境界線があります。

* **なぜ重要か？**
    この境界があるおかげで、厨房の内部（サービスの実装）を後から自由に変更・改善できます。シェフが新しいオーブンを導入しても、客には何の影響もありません。これが**「疎結合」**の基本です。

---

### 👑 2. サービスは自律的である (Services are autonomous)

自律的とは、サービスが**自分自身のロジックとデータを管理し、他のサービスに依存せずに機能できる**ことを意味します。あるサービスが機能するために、他のサービスのデータベースを直接参照したり、内部ロジックを呼び出したりするべきではありません。

* **たとえるなら…**
    会社の「営業部」と「経理部」です。営業部は自分たちで顧客リストや商談の進捗を管理します。経理部は、営業部から報告された「売上確定情報」を元に請求処理を行いますが、営業部が管理している「見込み客リスト」を勝手に書き換えることはしません。それぞれの部署が自律しています。

* **なぜ重要か？**
    サービスが自律していることで、**個別に開発、テスト、デプロイ、スケール（拡張）**ができます。経理部のシステムを改修している間も、営業部は問題なく業務を続けられます。

---

### 🤝 3. サービスは実装ではなく「契約」を共有する (Services share contract, not implementation)

サービス同士は、ソースコードやライブラリ、データベースのテーブルといった「実装」を共有して連携するのではなく、**「契約（コントラクト）」**を通じて連携します。契約とは、APIの仕様書（「このURLにこの形式でリクエストを送れば、この形式で応答が返る」という約束事）などを指します。

* **たとえるなら…**
    家庭のコンセントです。電力会社（サービス提供者）と家電メーカー（利用者）は、「日本のコンセントは交流100Vで、この形をしている」という「契約」だけを共有しています。この契約さえ守れば、電力会社は発電方法を火力から水力に変えてもいいし、メーカーはテレビでもドライヤーでも自由に作って繋ぐことができます。

* **なぜ重要か？**
    これにより、**異なるプログラミング言語や技術で作られたサービス同士が自由に連携**できます。Javaで書かれたサービスとPythonで書かれたサービスが、APIという共通の「契約」を通じて問題なく会話できるのです。

---

### 📜 4. サービスの互換性はポリシーによって決まる (Service compatibility is determined by policy)

サービスは一度作ったら終わりではなく、常に変化し、進化していきます。その際に、**古いバージョンのサービスを利用しているクライアントを壊さないように、どうやって互換性を保つか**というルール（ポリシー）が重要になります。

* **たとえるなら…**
    USB規格です。USB 2.0の端子にUSB 3.0の機器を挿しても（速度は落ちますが）動作しますし、逆もまた然りです。これは「古い規格もサポートする」という後方互換性のポリシーがあるからです。APIの世界では、「新しい項目を追加するのはOKだが、既存の項目を削除・変更してはならない」といったポリシーがこれにあたります。

* **なぜ重要か？**
    厳格な互換性ポリシーがないと、あるサービスを少し更新しただけで、それに依存する全てのサービスが動かなくなり、システム全体を一度に更新する必要が出てきます。これでは俊敏性が失われてしまいます。

---

以上がSOAの4大基本原則です。
これらの原則はすべて、サービスの**「疎結合」**と**「独立性」**を高め、変化に強い柔軟なシステムを構築するために存在しています。
