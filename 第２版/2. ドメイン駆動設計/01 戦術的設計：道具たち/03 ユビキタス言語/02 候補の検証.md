## 候補の検証

前回上げたこの３つのグループがシステムの分割単位の有力候補です。

* **グループA** → **予約コンテキスト**
* **グループB** → **顧客管理コンテキスト**
* **グループC** → **決済コンテキスト**

この有力候補が「本物」か検証する作業をしていきます。  
その検証作業として、各候補の**「役割」と「責任」**を具体的に定義していきます。

---
## 😊 各候補のプロフィール定義（＝仮説の検証）

#### 1. 予約コンテキスト (Booking Context) の検証
* **中核となる責務 (仮説)**:
    * **予約のライフサイクル全体を管理すること。**
* **主要な概念**:
    * `予約 (Reservation)`, `宿泊期間 (Stay Period)`, `客室タイプ (Room Type)`, `料金 (Rate)`
* **このコンテキストが答えるべき問い**:
    * 「来週末、スイートルームは空いていますか？」
    * 「シングルルームに3泊した場合の合計料金はいくらですか？」
    * 「田中様の予約を確定してください。」

---
#### 2. 顧客管理コンテキスト (Customer Management Context) の検証
* **中核となる責務 (仮説)**:
    * **顧客と宿泊客の情報を正確に維持し、一元管理すること。**
* **主要な概念**:
    * `顧客 (Customer)`, `宿泊客 (Guest)`, 連絡先情報, 宿泊履歴
* **このコンテキストが答えるべき問い**:
    * 「顧客ID『CUS-123』の山田様のメールアドレスは何ですか？」
    * 「この宿泊客は、以前に宿泊されたことがありますか？」

---
#### 3. 決済コンテキスト (Payment Context) の検証
* **中核となる責務 (仮説)**:
    * **金銭に関するすべてのトランザクションを、安全かつ確実に処理すること。**
* **主要な概念**:
    * `支払い (Payment)`, 請求情報, クレジットカード情報
* **このコンテキストが答えるべき問い**:
    * 「予約ID『RES-456』に対して、15,000円のカード決済を実行してください。」
    * 「この予約の支払いは完了していますか？」

承知いたしました。ご指摘の通り、検証が一括りで大雑把になっていました。また、検証ポイントの文章にも誤りがあり失礼いたしました。物事を一つずつ丁寧に検証していく姿勢は、良い設計を行う上で非常に重要です。

では、改めて検証の目的を明確にし、修正した**3つの検証ポイント**を使って、候補となるコンテキストを**一つずつ丁寧に**見ていきましょう。


## 😊 検証で使う「3つの問い」

これから、私たちが立てた「この3つの候補は、良い分割単位ではないか？」という仮説を検証します。そのために、各候補に以下の3つの問いを投げかけます。

1.  **問い１：責務は明確か？**
    * そのコンテキストの「中核となる責務」を、ひと言でスッキリ説明できるか？もし責務が複数あったり、曖昧だったりする場合、境界線が不適切なサインです。

2.  **問い２：概念に一体感はあるか？**
    * そのコンテキストに属する「主要な概念（ユビキタス言語）」は、自然な一つのまとまりに見えるか？もし一つだけ毛色の違う概念が混じっていたら、それは仲間はずれがいるサインです。

3.  **問い３：連携はシンプルになるか？**
    * そのコンテキストが「答えるべき問い」を考えると、他のコンテキストとの連携（メッセージのやり取り）はシンプルになりそうか？もし連携が不自然に複雑になるなら、役割分担が不適切なサインです。

---
## 😊 検証の実施



#### ✅ 候補１：予約コンテキスト の検証

* **プロフィール**:
    * **責務**: 予約のライフサイクル全体を管理すること。
    * **概念**: `予約`, `宿泊期間`, `客室タイプ`, `料金`
    * **問い**: 「空室は？」「料金は？」「予約して」「キャンセルして」

* **検証**:
    1.  **責務は明確か？** → はい。「予約に関すること」という、単一で明確な責務を持っています。PASSです。
    2.  **概念に一体感はあるか？** → はい。リストアップされた概念はすべて、予約という行為を行うために必須の要素です。自然なまとまりです。PASSです。
    3.  **連携はシンプルになるか？** → はい。「顧客管理」に顧客情報を問い合わせ、「決済」に支払い処理を依頼する、というシンプルで一方的な依頼になりそうです。PASSです。

* **判定**: **予約コンテキスト**は、非常に**強力で「本物」らしい候補**と言えそうです。

---
#### ✅ 候補２：顧客管理コンテキスト の検証

* **プロフィール**:
    * **責務**: 顧客と宿泊客の情報を正確に維持し、一元管理すること。
    * **概念**: `顧客`, `宿泊客`, 連絡先情報, 宿泊履歴
    * **問い**: 「連絡先は？」「過去に泊まったことは？」

* **検証**:
    1.  **責務は明確か？** → はい。「顧客情報に関すること」という、単一で明確な責務です。PASSです。
    2.  **概念に一体感はあるか？** → はい。すべて「人」に関する情報で、強い一体感があります。PASSです。
    3.  **連携はシンプルになるか？** → はい。他のコンテキストから「顧客情報を教えて」と問い合わせを受けるのが主な役割になりそうです。シンプルな連携です。PASSです。

* **判定**: **顧客管理コンテキスト**も、**「本物」らしい候補**と言えます。

---
#### ✅ 候補３：決済コンテキスト の検証

* **プロフィール**:
    * **責務**: 金銭に関するすべてのトランザクションを、安全かつ確実に処理すること。
    * **概念**: `支払い`, 請求情報, クレジットカード情報
    * **問い**: 「決済して」「支払われたか？」「返金して」

* **検証**:
    1.  **責務は明確か？** → はい。「お金に関すること」という、非常に専門的で明確な責務です。PASSです。
    2.  **概念に一体感はあるか？** → はい。概念はすべて決済処理に直結しており、非常に強いまとまりです。PASSです。
    3.  **連携はシンプルになるか？** → はい。「予約コンテキスト」から金額と支払い対象を受け取って処理を実行する、という専門家のような役割です。連携は非常にシンプルです。PASSです。

* **判定**: **決済コンテキスト**も、**疑いようもなく「本物」の候補**です。

---
## 😊 検証の最終結論

3つの候補は、それぞれが3つの問いを見事にクリアしました。

この丁寧な検証プロセスを経たことで、私たちは「言語のグループ分け」というヒントから見つけ出した分割案が、**単なる思いつきではなく、論理的に妥当で、堅牢な設計の土台となりうる**という強い確信を得ることができました。


