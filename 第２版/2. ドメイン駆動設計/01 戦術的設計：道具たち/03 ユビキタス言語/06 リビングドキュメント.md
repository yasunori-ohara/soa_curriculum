## 🤔 リビングドキュメントについて深堀したいのですが、これはユビキタス言語とは別にして議論したほうがいいですか？


これらは**非常に密接に関連している**ため、一緒に議論するのが最適です。

\*\*ユビキタス言語は、リビングドキュメントを実現するための「土台」\*\*と考えると、その関係性が非常に分かりやすくなります。

-----

## 土台と、その上に建つ家

### 1\. ユビキタス言語（土台：言葉を揃える）

まず、ユビキタス言語によって、チーム全員が使う\*\*言葉（語彙）\*\*を定義し、揃えます。

  * `顧客 (Customer)` とは何か？
  * `予約 (Reservation)` とは何か？
  * `プレミアム会員 (premium_member)` とはどういう状態か？

この「言葉」が、これから建てる家（リビングドキュメント）の頑丈な土台になります。

-----

### 2\. リビングドキュメント（家：言葉で文章を作る）

次に、リビングドキュメント（BDDのテストシナリオなど）は、その揃えられた\*\*言葉（語彙）を使って、具体的な文章（振る舞いの仕様）\*\*を組み立てていきます。

```gherkin
シナリオ: プレミアム会員が通常客室を早期予約すると割引が適用される
  前提 "プレミアム会員" の "顧客" が存在する
  ...
```

もし、土台であるユビキタス言語がなければ（＝言葉の意味が曖昧だと）、この文章もまた曖昧なものになってしまいます。「プレミアム会員」の定義が人によって違えば、このシナリオは意味をなさなくなります。

### 料理のレシピに例えると 🍳

この関係は、料理のレシピそのものです。

  * **ユビキタス言語**:

      * 「**強火**」「**弱火**」「**みじん切り**」「**さっと茹でる**」といった、**料理の専門用語とその定義**を全員で合意することです。「強火ってどれくらい？」という認識のズレをなくします。

  * **リビングドキュメント**:

      * その合意した専門用語だけを使って書かれた\*\*レシピ（仕様書 兼 テスト）\*\*です。「**玉ねぎをみじん切りにし、強火で炒める**」のように、誰が読んでも同じ行動が取れる、明確な指示書になります。

優れたレシピ（リビングドキュメント）は、必ず正確な専門用語（ユビキタス言語）の上に成り立っています。

-----

### まとめ

以下の図のように、ユビキタス言語とリビングドキュメントは、切っても切れない関係です。

```
┌─────────────────────────────┐
│   1. ユビキタス言語の定義     │ (言葉のパーツを揃える)
│   (Customer, Rateなど)      │
└─────────────┬─────────────┘
              │ (この言葉を使って...)
              ▼
┌─────────────────────────────┐
│   2. リビングドキュメント     │ (言葉を組み立てて文章にする)
│   (BDDテストシナリオ)        │
└─────────────┬─────────────┘
              │ (この文章を...)
              ▼
┌─────────────────────────────┐
│   3. コードに実装            │ (テストをパスさせる)
│   (customer.is_premium())   │
└─────────────────────────────┘
```

**ユビキタス言語**が**語彙**を提供し、**リビングドキュメント**がその語彙を使って\*\*文章（仕様）\*\*を紡ぎ出す。この2つは、ドメインの知識をコードに正確に反映させるための、強力なペアなのです。