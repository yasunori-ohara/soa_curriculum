## はじめに

ドメイン駆動設計ではホテル予約システムを題材に学習をすすめていきます。

### 最初に直面する「難しい問題」

私たちがソフトウェア開発で直面する最初の、そして最も難しい問題の一つがこれです。

> **🤔 難しい問題：**
> 「この複雑なホテル予約システム全体を、どう分割すれば、将来にわたって保守しやすく、拡張しやすい構造になるのか？」

これをいきなり考えようとしても、あまりに漠然としていて、どこから手をつけていいか分かりません。まるで、ぼんやりと霞んだ巨大な大陸を目の前にして、いきなり国境線を引こうとするようなものです。

---
### アプローチの転換：「簡単な問題」から始める

そこでDDDの戦略的設計では、この難しい問題を直接解こうとせず、アプローチを180度変えます。もっと具体的で、誰にでも取り組める「簡単な問題」から始めるのです。

> **😊 簡単な問題：**
> 「ホテルの現場では、どんな**言葉**が使われているだろう？そして、どの言葉とどの言葉が、会話の中で**一緒に出てくることが多い**だろうか？」

これは、抽象的な構造を考えるのではなく、ドメイン専門家（ホテルのスタッフ）との会話や、マニュアルの読み込みといった、**具体的な事実を集める**作業です。

---
### ステップ1：言葉を集める（ユビキタス言語の定義）

まずは、この「簡単な問題」に取り組むため、現場で使われている言葉をリストアップしていきます。これが**ユビキタス言語**の辞書作りです。

**📝 ユビキタス言語 用語集（ホテルの例）**
| 用語 | 意味・定義 |
| :--- | :--- |
| **予約 (Reservation)** | 客室タイプの確保契約。 |
| **宿泊期間 (Stay Period)** | チェックイン日からチェックアウト日までの期間。 |
| **料金 (Rate)** | 宿泊の金額。 |
| **顧客 (Customer)** | 予約と支払いを行う人物。 |
| **宿泊客 (Guest)** | 実際に宿泊する人物。 |
| **支払い (Payment)** | 金銭の授受。 |

---
### ステップ2：言葉をグループ化する（ヒントを見つける）

次に、集めた言葉を眺め、会話の文脈（コンテキスト）ごとにグループ分けします。

* **グループA：「予約」の話をするとき**
    * 「この**宿泊期間**だと、この**客室タイプ**の**料金**は…」というように、「予約」「宿泊期間」「料金」はいつもセットで使われるな。

* **グループB：「顧客」の話をするとき**
    * 「あの**顧客**は、以前に宿泊された**宿泊客**の情報と同一人物かな？」というように、「顧客」「宿泊客」は人に関する情報としてまとまっているな。

* **グループC：「支払い」の話をするとき**
    * 「予約の**支払い**はカードですか？請求書を発行しますか？」のように、「支払い」は他のグループとは少し違う、お金専門の話だな。



---
### ステップ3：ヒントから「分割の単位」を決める

この「言葉のグループ」こそが、最初の「難しい問題」を解くための**最大のヒント**です。私たちは、この言語的なまとまりが、そのままシステムの機能的なまとまり（＝分割の単位）を反映していると考えます。

このグループに**境界線**を引き、**境界づけられたコンテキスト**と名付けます。

* **グループA** → **予約コンテキスト**
* **グループB** → **顧客管理コンテキスト**
* **グループC** → **決済コンテキスト**


そしてこの言語的なグループが、そのままシステムの分割単位（＝境界づけられたコンテキスト）の有力な候補となります。

ご指摘の通り、戦略的設計とは、**言語という具体的な手がかり**を元に、**システムの適切な分割単位という抽象的な答え**を導き出すための、非常に実践的な思考プロセスなのです。