# 24 機能拡張：ログ出力

# 🪵 ログ出力の差し替え：`print()` → `logging`

## 🧭 この章の目的

この章では、アプリケーション内のログ出力を、**学習用の `print()` から、実務向けの `logging` モジュールに差し替える**方法を解説します。

![クリーンアーキテクチャ](../クリーンアーキテクチャ.png)

---

## 🔁 なぜログ出力の差し替えが「簡単」なのか？

> 💡 クリーンアーキテクチャを採用したからこそ、ログ技術の変更が容易になっています。
> 
- ログ出力は、各層の責務に応じて適切に配置されているため、**責務の境界を守ったまま差し替えが可能**です。
- `Presenter` や `Controller` は、ログ出力のために外部の技術に依存していないため、**`print()` → `logging` → Sentry などの外部サービスへの移行も容易**です。

---

## ✅ 差し替え例：Presenterのログ出力

```python
# presenter.py（変更前）
print(f"Presenter: ViewModelを更新しました → '{display_text}'")

```

```python
# presenter.py（変更後）
import logging
logger = logging.getLogger("ui.presenter")

logger.info(f"ViewModelを更新 → '{display_text}'")

```

---

## ✅ 差し替え例：Controllerのログ出力

```python
# controller.py（変更前）
print(f"\\nController: Use Caseを呼び出します (Input: {title})")

```

```python
# controller.py（変更後）
import logging
logger = logging.getLogger("ui.controller")

logger.info(f"Use Caseを呼び出します (Input: {title})")

```

---

## 🔧 `main.py` にロガー設定を追加

```python
import logging

def setup_logging():
    logging.basicConfig(
        level=logging.INFO,
        format="%(asctime)s [%(name)s] %(levelname)s: %(message)s"
    )

def main():
    setup_logging()
    # ...（依存関係の組み立てと起動）

```

---

## 🛡 この章の鉄則

> ログは記録せよ、だが責務を越えるな。
> 
- ログ出力は「観察と記録」に徹する
- ビジネス判断やUI描画には関与しない
- ログ技術の変更は、責務を守れば簡単に行える