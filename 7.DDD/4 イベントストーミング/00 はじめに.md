# 00 はじめに

これまでの演習では、コードの実装を通じてDDDの戦術的パターンを学んできました。しかし、DDDの重要な側面の一つは、ドメイン（ビジネス）の**プロセス**や**流れ**を深く理解することです。

**イベントストーミング (Event Storming)** は、Alberto Brandolini氏によって考案された、ドメインエキスパートと開発者が協力してドメイン知識を発見・共有するための**ワークショップ形式のモデリング手法**です。

このセクションでは、イベントストーミングの**簡易版**を体験し、ドメインのプロセスを視覚化し、そこからドメインモデル（特に**ドメインイベント**、**コマンド**、**集約**）のヒントを得る練習をします。

---

## 🎯 この演習のゴール

- ドメイン内で発生する重要な**出来事（ドメインイベント）**を洗い出すスキルを養う。
- イベント間の**因果関係**や**時間的な流れ**を可視化する。
- イベントの流れから、**コマンド**（操作）、**集約**（関連するモノ）、**外部システム**、**アクター**（利用者）といった他のドメイン要素を発見するヒントを得る。
- ドメインプロセス全体の**共通理解**を形成する体験をする。

---

## 🧭 なぜイベントストーミングなのか？

イベントストーミングには、以下のような利点があります。

1. **コラボレーションの促進**:
本来は複数人で（ドメインエキスパートも含めて）行うことで、活発な議論を通じて暗黙知を引き出し、チーム全体のドメイン理解を深めます。（今回は一人で行いますが、その思考プロセスを体験します）
2. **プロセスの可視化**:
複雑なビジネスプロセスや時間的な流れを、付箋（イベント）を使って視覚的に捉えることができます。これにより、見落としていたステップやボトルネックを発見しやすくなります。
3. **ドメインモデルへの繋がり**:
洗い出された**ドメインイベント**は、DDDの戦術的設計における重要なビルディングブロックに直結します。また、イベントの原因となる**コマンド**や、イベントが発生する対象となる**集約**も自然と見えてきます。
4. **境界の発見**:
イベントの流れが大きく変わる場所や、使われる言葉が変わる場所が、**境界づけられたコンテキスト**のヒントになることがあります。

---

## 📖 この演習の進め方（簡易版）

本来のイベントストーミングは広い壁と大量の付箋を使いますが、今回はテキストベースで、一人で思考を整理する形で進めます。

1. **題材の選択**:
分析したいドメインプロセスを選びます。（例：オンライン書店の注文プロセス）
2. **ドメインイベントの洗い出し**:
そのプロセスで発生する「ビジネス上意味のある出来事」を、**過去形**でできるだけ多く書き出します。（例：「注文が作成された」「支払いが行われた」）
3. **時系列に並べる**:
洗い出したイベントを、時間的な発生順序に従って左から右へ並べます。
4. **コマンド/トリガーの追加**:
各イベントの「原因」となった操作（**コマンド**、例：「注文を確定する」）や外部からのトリガー（例：「支払い通知を受け取った」）を特定し、イベントの前に置きます。
5. **アクター/システムの特定**:
コマンドを実行する「誰」（**アクター**、例：顧客、システム）や、関連する外部システムを書き加えます。
6. **集約/Read Modelの発見**:
コマンドが操作する対象（**集約**、例：`Order`）や、判断のために参照される情報（**Read Model**、例：商品カタログ）を特定し、関連付けます。
7. **(発展) ポリシー/ルールの追加**:
イベント発生時に自動的に実行されるルール（**ポリシー**、例：「注文確定したら在庫を引き当てる」）を特定します。

---

## 🧱 使う「記号」（テキスト表現）

- **ドメインイベント**: `[イベント名 (過去形)]` (例: `[注文が作成された]`)
- **コマンド**: `{コマンド名 (命令形)}` (例: `{注文を作成する}`)
- **アクター**: `(アクター名)` (例: `(顧客)`)
- **集約**: `<集約名>` (例: `<Order>`)
- **外部システム**: `<<外部システム名>>` (例: `<<決済システム>>`)
- **Read Model**: `{{Read Model名}}` (例: `{{商品カタログ}}`)
- **ポリシー**: `> ポリシーの説明` (例: `> 在庫引き当て`)