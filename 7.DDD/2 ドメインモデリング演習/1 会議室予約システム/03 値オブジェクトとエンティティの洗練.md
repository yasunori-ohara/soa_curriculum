# 03 å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ´—ç·´

# ã‚¹ãƒ†ãƒƒãƒ—ï¼“ï¼šå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ´—ç·´ âœ¨

Step 2 ã§ä¸»è¦ãªé›†ç´„ (`MeetingRoom`, `Reservation`) ã‚’ç‰¹å®šã—ã¾ã—ãŸã€‚ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ã“ã‚Œã‚‰ã®é›†ç´„å†…éƒ¨ã§ä½¿ã‚ã‚Œã‚‹**å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (Value Object)** ã‚’å…·ä½“çš„ã«è¨­è¨ˆã—ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å®šç¾©ã‚’ã‚ˆã‚Šæ´—ç·´ã•ã›ã¦ã„ãã¾ã™ã€‚ç‰¹ã«ã€ã€Œäºˆç´„æ™‚é–“å¸¯ã€ã®ã‚ˆã†ãªæ¦‚å¿µã‚’è±Šã‹ã«è¡¨ç¾ã™ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚

## ğŸ¤” å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã¯ï¼Ÿï¼ˆå¾©ç¿’ï¼‰

- *å±æ€§ï¼ˆå€¤ï¼‰*ã ã‘ã§å®šç¾©ã•ã‚Œã‚‹ï¼ˆIDã‚’æŒãŸãªã„ï¼‰ã€‚
- é€šå¸¸ã¯**ä¸å¤‰ (Immutable)**ã€‚
- **è‡ªå·±æ¤œè¨¼**ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒã¤ã“ã¨ãŒã§ãã‚‹ã€‚

---

## ğŸ’ 1. `TimeRange` å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¨­è¨ˆ

ğŸ“ **èª²é¡Œ**: äºˆç´„æ™‚é–“å¸¯ã¯ã€Œé–‹å§‹æ—¥æ™‚ã€ã¨ã€Œçµ‚äº†æ—¥æ™‚ã€ã§æ§‹æˆã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’å˜ã«2ã¤ã® `datetime` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ `Reservation` ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«æŒãŸã›ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ã€Œçµ‚äº†æ—¥æ™‚ã¯é–‹å§‹æ—¥æ™‚ã‚ˆã‚Šå¾Œã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ã‚„ã€ã€Œæ™‚é–“å¸¯ã®é•·ã•ã‚’è¨ˆç®—ã™ã‚‹ã€ã€Œä»–ã®æ™‚é–“å¸¯ã¨é‡è¤‡ã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€ã¨ã„ã£ãŸé–¢é€£ãƒ­ã‚¸ãƒƒã‚¯ãŒ `Reservation` ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚„ `UseCase` ã«æ•£ã‚‰ã°ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ğŸ’¡ **è§£æ±ºç­–**: ã€Œäºˆç´„æ™‚é–“å¸¯ã€ã¨ã„ã†æ¦‚å¿µè‡ªä½“ã‚’ `TimeRange` **å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**ã¨ã—ã¦å®šç¾©ã—ã¾ã™ã€‚ã“ã®ã‚¯ãƒ©ã‚¹ã«ã€é–‹å§‹æ—¥æ™‚ã¨çµ‚äº†æ—¥æ™‚ã®ä¿æŒã€ãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼ã€é–¢é€£ã™ã‚‹æŒ¯ã‚‹èˆã„ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¾ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«:** `domain/value_objects.py` (è¿½è¨˜)

```python
# domain/value_objects.py
from dataclasses import dataclass
from datetime import datetime, timedelta # timedelta ã‚’è¿½åŠ 

# (Money, AccountNumber from previous examples - remove if not needed)

# -----------------------------------------------------------------------------
# TimeRange Value Object
# - DDDæˆ¦è¡“çš„è¨­è¨ˆã® Value Object
# - CAã® Entities å±¤ (ãƒ‰ãƒ¡ã‚¤ãƒ³ã®æ ¸ã¨ãªã‚‹ãƒ«ãƒ¼ãƒ«ã®ä¸€éƒ¨)
# -----------------------------------------------------------------------------
@dataclass(frozen=True) # ä¸å¤‰
class TimeRange:
    """
    äºˆç´„æ™‚é–“å¸¯ï¼ˆé–‹å§‹æ—¥æ™‚ã¨çµ‚äº†æ—¥æ™‚ï¼‰ã‚’è¡¨ã™å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
    - ä¸å¤‰ã§ã‚ã‚Šã€å€¤ï¼ˆstart_datetime, end_datetimeï¼‰ã§å®šç¾©ã•ã‚Œã‚‹ã€‚
    - ç”Ÿæˆæ™‚ã«æ™‚é–“çš„å‰å¾Œé–¢ä¿‚ã‚’æ¤œè¨¼ã™ã‚‹ (è‡ªå·±æ¤œè¨¼)ã€‚
    - æ™‚é–“å¸¯ã«é–¢ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæœŸé–“è¨ˆç®—ã€é‡è¤‡ãƒã‚§ãƒƒã‚¯ãªã©ï¼‰ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã™ã‚‹ã€‚
    """
    start_datetime: datetime
    end_datetime: datetime

    def __post_init__(self):
        """è‡ªå·±æ¤œè¨¼ï¼šçµ‚äº†ã¯é–‹å§‹ã®å¾Œã§ãªã‘ã‚Œã°ãªã‚‰ãªã„"""
        print(f"[VO Check] Validating TimeRange: {self.start_datetime} - {self.end_datetime}")
        if self.start_datetime >= self.end_datetime:
            raise ValueError("End datetime must be after start datetime.")
        # (ä¾‹: æœ€å°äºˆç´„æ™‚é–“ã€æœ€å¤§äºˆç´„æ™‚é–“ã®ãƒã‚§ãƒƒã‚¯ãªã©ã‚‚ã“ã“ã«è¿½åŠ å¯èƒ½)
        print("[VO Check] TimeRange is valid.")

    def get_duration(self) -> timedelta:
        """äºˆç´„æ™‚é–“å¸¯ã®é•·ã•ã‚’è¨ˆç®—ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰"""
        return self.end_datetime - self.start_datetime

    def overlaps_with(self, other: 'TimeRange') -> bool:
        """
        åˆ¥ã®æ™‚é–“å¸¯ã¨é‡è¤‡ã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã€‚
        (å¢ƒç•Œå€¤ã®æ‰±ã„: é–‹å§‹æ™‚åˆ»ã¯å«ã¿ã€çµ‚äº†æ™‚åˆ»ã¯å«ã¾ãªã„ã¨å®šç¾©ã™ã‚‹å ´åˆ)
        """
        # é‡è¤‡ã—ãªã„æ¡ä»¶:
        # 1. è‡ªåˆ†ã®çµ‚äº†ãŒç›¸æ‰‹ã®é–‹å§‹ä»¥å‰
        # 2. è‡ªåˆ†ã®é–‹å§‹ãŒç›¸æ‰‹ã®çµ‚äº†ä»¥å¾Œ
        # ä¸Šè¨˜ä»¥å¤–ã¯é‡è¤‡ã™ã‚‹
        return not (self.end_datetime <= other.start_datetime or \\
                    self.start_datetime >= other.end_datetime)

```

âœ… **ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒã‚¤ãƒ³ãƒˆ**:

- `TimeRange` ã‚¯ãƒ©ã‚¹ã«ã‚ˆã‚Šã€ã€Œæ™‚é–“å¸¯ã€ã¨ã„ã†ãƒ‰ãƒ¡ã‚¤ãƒ³æ¦‚å¿µãŒæ˜ç¢ºãªå‹ã«ãªã‚Šã¾ã—ãŸã€‚
- `__post_init__` ã§**è‡ªå·±æ¤œè¨¼**ã‚’è¡Œã„ã€ã€Œçµ‚äº† \> é–‹å§‹ã€ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ã‚’ä¿è¨¼ã—ã¾ã™ã€‚
- `get_duration` ã‚„ `overlaps_with` ã¨ã„ã£ãŸã€æ™‚é–“å¸¯ã«é–¢é€£ã™ã‚‹**ãƒ­ã‚¸ãƒƒã‚¯**ã‚’å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã«ã‚«ãƒ—ã‚»ãƒ«åŒ–ã§ãã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€`Reservation` ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚„ `UseCase` ã®ã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ§± 2. ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ (`Reservation`) ã®æ´—ç·´

`TimeRange` å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã£ã¦ã€`Reservation` ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å®šç¾©ã‚’æ›´æ–°ã—ã¾ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«:** `domain/aggregates.py` (Reservation éƒ¨åˆ†ã‚’ä¿®æ­£)

```python
# domain/aggregates.py
# (Imports: Money, datetime, List, Dict, uuid, field etc. are assumed)
from .value_objects import Money, TimeRange # ğŸ‘ˆ TimeRange ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

# (OrderItem definition remains the same)
@dataclass
class OrderItem: # å®Ÿè£…çœç•¥
    pass

# (Order aggregate remains the same, if it exists in this context)
@dataclass
class Order: # å®Ÿè£…çœç•¥
    pass

# -----------------------------------------------------------------------------
# Reservation Aggregate Root / Entity
# - DDDæˆ¦è¡“çš„è¨­è¨ˆã® Aggregate Root / Entity
# - CAã® Entities å±¤
# -----------------------------------------------------------------------------
@dataclass
class Reservation:
    """
    äºˆç´„ã‚’è¡¨ã™é›†ç´„ãƒ«ãƒ¼ãƒˆãƒ»ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€‚
    - reservationIdã§è­˜åˆ¥ã•ã‚Œã‚‹ã€‚
    - äºˆç´„æ™‚é–“å¸¯ã¯ TimeRange å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ä¿æŒã™ã‚‹ã€‚
    """
    reservation_id: str = field(default_factory=lambda: str(uuid.uuid4()))
    room_id: str # ã©ã®ä¼šè­°å®¤ã‹ (MeetingRoomé›†ç´„ã¸ã®å‚ç…§ID)
    user_id: str # èª°ãŒäºˆç´„ã—ãŸã‹ (Useré›†ç´„ã¸ã®å‚ç…§ID)
    time_range: TimeRange # ğŸ‘ˆ datetime 2ã¤ã§ã¯ãªãã€TimeRangeå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã†
    status: str = "CONFIRMED" # ä¾‹: CONFIRMED, CANCELLED

    # _domain_events: List[DomainEvent] = field(default_factory=list, init=False, repr=False)

    def cancel(self):
        """[ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æŒ¯ã‚‹èˆã„] äºˆç´„ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹"""
        print(f"[Aggregate Logic] Cancelling reservation {self.reservation_id}")
        if self.status == "CANCELLED":
            print("[Aggregate Logic] Already cancelled.")
            return
        # (ä¾‹: ã‚­ãƒ£ãƒ³ã‚»ãƒ«æœŸé™ãƒã‚§ãƒƒã‚¯ãªã©ã®ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã‚’ã“ã“ã«è¿½åŠ )
        self.status = "CANCELLED"
        print("[Aggregate Logic] Reservation cancelled.")
        # event = ReservationCancelledEvent(...)
        # self._domain_events.append(event)

    def get_start_time(self) -> datetime:
        """äºˆç´„é–‹å§‹æ™‚åˆ»ã‚’å–å¾—ã™ã‚‹ (TimeRangeã¸ã®å§”è­²)"""
        return self.time_range.start_datetime

    def get_end_time(self) -> datetime:
        """äºˆç´„çµ‚äº†æ™‚åˆ»ã‚’å–å¾—ã™ã‚‹ (TimeRangeã¸ã®å§”è­²)"""
        return self.time_range.end_datetime

    # (ã‚‚ã—äºˆç´„æ™‚é–“å¤‰æ›´ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒå¿…è¦ãªã‚‰ã€æ–°ã—ã„TimeRangeã‚’ç”Ÿæˆã—ã¦è¨­å®šã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©)
    # def reschedule(self, new_time_range: TimeRange): ...

    # --- ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆé–¢é€£ãƒ¡ã‚½ãƒƒãƒ‰ (å‚è€ƒ) ---
    # def get_uncommitted_events(self) -> List[DomainEvent]: ...
    # def clear_uncommitted_events(self): ...

```

âœ… **ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒã‚¤ãƒ³ãƒˆ**:

- `Reservation` ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒã€`start_datetime` ã¨ `end_datetime` ã‚’ç›´æ¥æŒã¤ä»£ã‚ã‚Šã«ã€`TimeRange` **å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**ã‚’æŒã¤ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
- ã“ã‚Œã«ã‚ˆã‚Šã€`Reservation` ã‚¯ãƒ©ã‚¹è‡ªä½“ã®ã‚³ãƒ¼ãƒ‰é‡ãŒæ¸›ã‚Šã€ã€Œäºˆç´„ã€ã¨ã„ã†æ¦‚å¿µã®æœ¬è³ªçš„ãªå±æ€§ï¼ˆèª°ãŒã€ä½•ã‚’ã€ã„ã¤ï¼‰ã¨çŠ¶æ…‹ï¼ˆ`status`ï¼‰ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
- æ™‚é–“å¸¯ã«é–¢ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæœŸé–“è¨ˆç®—ã‚„é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼‰ãŒå¿…è¦ãªå ´åˆã¯ã€`self.time_range` ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã ã‘ã§æ¸ˆã¿ã¾ã™ï¼ˆ**é–¢å¿ƒã®åˆ†é›¢**ï¼‰ã€‚

---

## ğŸ§© 3. `MeetingRoom` ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ `BookableHours`

ğŸ“ **èª²é¡Œ**: ä¼šè­°å®¤ (`MeetingRoom`) ã«ã¯ã€ã€Œäºˆç´„å¯èƒ½ãªæ™‚é–“å¸¯ï¼ˆä¾‹ï¼šå¹³æ—¥9æ™‚ã€œ18æ™‚ï¼‰ã€ã¨ã„ã†æƒ…å ±ãŒå¿…è¦ã§ã™ã€‚ã“ã‚Œã‚‚æ™‚é–“å¸¯ã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã§ã™ã€‚

ğŸ’¡ **è§£æ±ºç­–**: ã“ã‚Œã‚‚ `BookableHours` ã¨ã„ã†**å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**ã¨ã—ã¦ãƒ¢ãƒ‡ãƒ«åŒ–ã™ã‚‹ã“ã¨ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ãŸã ã—ã€å®Ÿè£…ãŒè¤‡é›‘ã«ãªã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚‹ãŸã‚ã€ä»Šå›ã¯å˜ç´”åŒ–ã—ã¦ `MeetingRoom` ã®å±æ€§ã¨ã—ã¦æ–‡å­—åˆ—ãªã©ã§ä¿æŒã™ã‚‹ã‹ã€ã‚ã‚‹ã„ã¯ã“ã®æ¼”ç¿’ã®ã‚¹ã‚³ãƒ¼ãƒ—å¤–ã¨ã—ã¦ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚ã“ã“ã§ã¯ã€`TimeRange` ã‚’ä½¿ã£ã¦ç‰¹å®šã®æ™‚é–“å¸¯ãŒäºˆç´„å¯èƒ½ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ `MeetingRoom` ã«æŒãŸã›ã‚‹ã“ã¨ã‚’è€ƒãˆã¾ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«:** `domain/aggregates.py` (MeetingRoom éƒ¨åˆ†ã‚’è¿½åŠ ãƒ»ä¿®æ­£)

```python
# domain/aggregates.py
# (Other imports and classes...)
from .value_objects import TimeRange # TimeRange ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

# -----------------------------------------------------------------------------
# MeetingRoom Aggregate Root / Entity
# - DDDæˆ¦è¡“çš„è¨­è¨ˆã® Aggregate Root / Entity
# - CAã® Entities å±¤
# -----------------------------------------------------------------------------
@dataclass
class MeetingRoom:
    """
    ä¼šè­°å®¤ã‚’è¡¨ã™é›†ç´„ãƒ«ãƒ¼ãƒˆãƒ»ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€‚
    - roomIdã§è­˜åˆ¥ã•ã‚Œã‚‹ã€‚
    - äºˆç´„ã®å¯å¦ã«é–¢ã™ã‚‹åŸºæœ¬çš„ãªãƒ«ãƒ¼ãƒ«ã‚’æŒã¤ã€‚
    """
    room_id: str = field(default_factory=lambda: str(uuid.uuid4()))
    name: str
    capacity: int
    # bookable_hours: BookableHours # ğŸ‘ˆ ã‚ˆã‚Šæ´—ç·´ã•ã›ã‚‹ãªã‚‰å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåŒ–
    # equipment: List[EquipmentVO] # ğŸ‘ˆ å‚™å“ã‚‚å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒªã‚¹ãƒˆã«

    def can_book(self, requested_range: TimeRange) -> bool:
        """
        æŒ‡å®šã•ã‚ŒãŸæ™‚é–“å¸¯ãŒã€ã“ã®ä¼šè­°å®¤ã®äºˆç´„å¯èƒ½ãƒ«ãƒ¼ãƒ«ã«åˆè‡´ã™ã‚‹ã‹ã‚’åˆ¤æ–­ã™ã‚‹ã€‚
        (æ³¨æ„: ä»–ã®äºˆç´„ã¨ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯ã¯ã“ã“ã§è¡Œã‚ãªã„)
        """
        print(f"[Aggregate Logic] Checking if {self.name}({self.room_id}) can be booked for {requested_range.start_datetime} - {requested_range.end_datetime}")

        # --- ã“ã“ã«äºˆç´„å¯èƒ½ãƒ«ãƒ¼ãƒ«ã‚’å®Ÿè£… ---
        # ä¾‹1: å–¶æ¥­æ™‚é–“ã‚’ãƒã‚§ãƒƒã‚¯ (bookable_hours ã‚’ä½¿ã†)
        # if not self.bookable_hours.includes(requested_range): return False

        # ä¾‹2: ç°¡å˜ãªãƒ«ãƒ¼ãƒ«ï¼ˆä¾‹ï¼šé–‹å§‹ãŒ9æ™‚ä»¥å‰ã€çµ‚äº†ãŒ18æ™‚ä»¥é™ã¯ä¸å¯ï¼‰
        if requested_range.start_datetime.hour < 9 or requested_range.end_datetime.hour > 18:
             print("[Aggregate Logic] Requested time is outside operating hours (9-18).")
             return False

        # ä¾‹3: æœ€å°äºˆç´„æ™‚é–“ã€æœ€å¤§äºˆç´„æ™‚é–“ã®ãƒã‚§ãƒƒã‚¯
        if requested_range.get_duration() < timedelta(minutes=30):
             print("[Aggregate Logic] Booking duration is less than minimum (30 min).")
             return False

        print("[Aggregate Logic] Basic booking rules passed.")
        return True

    # ... ä»–ã®ä¼šè­°å®¤ã«é–¢ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ ...

```

âœ… **ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒã‚¤ãƒ³ãƒˆ**:

- `MeetingRoom` ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒã€è‡ªèº«ã®äºˆç´„å¯èƒ½æ€§ã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ« (`can_book`) ã‚’æŒã¤ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
- ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã¨ã—ã¦ `TimeRange` å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å—ã‘å–ã‚‹ã“ã¨ã§ã€`UseCase` ã¯ `datetime` 2ã¤ã§ã¯ãªãã€æ„å‘³ã®ã‚ã‚‹ã€Œæ™‚é–“å¸¯ã€ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚
- `BookableHours` ã‚„ `Equipment` ã‚’å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã•ã‚‰ã«æ´—ç·´ã•ã›ã‚‹ã“ã¨ã§ã€`MeetingRoom` ã®è²¬å‹™ã‚’ã‚ˆã‚Šæ˜ç¢ºã«ã§ãã¾ã™ï¼ˆä»Šå›ã¯çœç•¥ï¼‰ã€‚

---

## ğŸ“ ã¾ã¨ã‚

ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ãƒ‰ãƒ¡ã‚¤ãƒ³å†…ã®é‡è¦ãªæ¦‚å¿µã§ã‚ã‚‹ã€Œæ™‚é–“å¸¯ (`TimeRange`)ã€ã‚’**å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**ã¨ã—ã¦æŠ½å‡ºã—ã€ãã‚Œã‚’ `Reservation` ã‚„ `MeetingRoom` **ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**ã§åˆ©ç”¨ã™ã‚‹ã‚ˆã†ã«ãƒ¢ãƒ‡ãƒ«ã‚’æ´—ç·´ã—ã¾ã—ãŸã€‚

å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€

- ã‚³ãƒ¼ãƒ‰ã®**è¡¨ç¾åŠ›**ãŒå‘ä¸Šã—ï¼ˆ`TimeRange` å‹ï¼‰ã€
- **ä¸å¤‰æ€§**ã«ã‚ˆã£ã¦å®‰å…¨æ€§ãŒé«˜ã¾ã‚Šã€
- **è‡ªå·±æ¤œè¨¼**ã«ã‚ˆã£ã¦ä¸æ­£ãªãƒ‡ãƒ¼ã‚¿ãŒæ¸›ã‚Šã€
- é–¢é€£ã™ã‚‹**ãƒ­ã‚¸ãƒƒã‚¯**ï¼ˆæœŸé–“è¨ˆç®—ã€é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼‰ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¦**é–¢å¿ƒã‚’åˆ†é›¢**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

---

## â¡ï¸ æ¬¡ã¸

æ¬¡ã¯ã€ã“ã‚Œã‚‰ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ï¼ˆé›†ç´„ï¼‰ã‚’æ°¸ç¶šåŒ–ã—ã€åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ã€Œ**(Step 4) ãƒªãƒã‚¸ãƒˆãƒªã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ç­‰ã®æ¤œè¨**ã€ã«é€²ã¿ã¾ã™ã€‚