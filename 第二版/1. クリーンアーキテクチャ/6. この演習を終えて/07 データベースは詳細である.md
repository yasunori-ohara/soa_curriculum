## 🤔 なぜ「データベースは詳細である」と言えるのか？

多くの開発者にとって、データベースはシステムの中心であり、アプリケーションはデータベースに従属するもの、という考え方が染み付いているため、この「データベースは詳細である」という言葉は、最も理解が難しく、かつ最も大きなパラダイムシフトを要求する言葉かもしれません。

---

### 🛠️ 1. ビジネスルールは、永続化技術に依存しない

これが最も根源的な理由です。

* **図書館システム**の「貸出中の本は貸し出せない」というルール。
* **自動販売機**の「投入金額が足りなければ商品は買えない」というルール。

これらのビジネスルールは、データの保存先が**PostgreSQL**であろうと、**Excelファイル**であろうと、あるいは**紙のノート**であろうと、全く変わりません。ビジネスルールは、特定のデータベース技術が存在するずっと前から存在しています。

クリーンアー-キテクチャは、この事実をソフトウェアの構造に反映させます。`UseCase`や`Entity`といったビジネスルールの塊は、`DataAccessInterface`という抽象的な「**何かデータを永続化してくれるもの**」にのみ依存し、その「何か」の正体（= 詳細）を知る必要がないのです。

### 🛠️ 2. データベースは「交換可能な部品」である

このアーキテクチャでは、データベースは車のタイヤのように、**交換可能な一つの部品**として扱われます。

プロジェクトの初期段階では、高速に開発とテストを進めるために`InMemoryDataAccess`（メモリ）という「仮のタイヤ」を装着しておきます。そして、システムのコア機能が完成した後に、「やはり本格的な運用にはPostgreSQL（本番用のタイヤ）が必要だ」と判断したら、対応する`Adapter`を実装して、タイヤを履き替えるだけです。

このとき、車のエンジンやシャシーにあたる`UseCase`や`Entity`には、一切の変更が必要ありません。データベースという「詳細」の変更が、システムの「方針」に影響を与えないのです。

---
### 🛠️ この考え方が信じられない場合

もし「いや、どう考えてもUserテーブルの構造がシステムの中心だろう」と感じる場合、それはアプリケーションが**データ中心(Data-Centric)**に設計されている証拠かもしれません。多くのCRUD（作成・読込・更新・削除）が中心のアプリケーションでは、そのように考えがちです。

しかし、クリーンアーキテクチャが目指すのは、**ビジネスの振る舞い(Behavior)を中心**に据えた**ドメイン中心(Domain-Centric)**の設計です。

「`User`というデータ構造がある」のではなく、「`User`は`login()`したり、`change_password()`したりする**振る舞いを持つ**」という視点から始めます。その結果として、`User`の状態を保存するためにデータベースという「詳細」が必要になる、という順序で考えるのです。

この思考の転換こそが、「データベースは詳細である」という言葉を本当に理解するための鍵となります。