## 1. サービスは明確な境界を持つ (Services have explicit boundaries)

この原則の核心は、**「サービスが『何をするか（What）』と、『どうやってやるか（How）』を完全に分離し、外部には『何をするか』だけを公開する」**という考え方です。

サービスの利用者は、そのサービスが提供する機能のリスト（公開されたAPI）だけを知っていればよく、その内部でどんな複雑な処理が行われているか、どんなデータベースを使っているかといった実装の詳細は一切知る必要がありません。サービスは利用者にとって**「ブラックボックス」**であるべきです。


---

### ✨ ドメイン駆動設計（DDD）との関連

サービスの「明確な境界」をどこに引くべきか？ この最も難しい問いに答えるための強力なツールが、まさにDDDの**戦略的設計**、特に**「境界づけられたコンテキスト（Bounded Context）」**です。

* **応用するDDDの知識:**
    * **境界づけられたコンテキスト:** DDDで学んだ、特定のドメインモデルが意味を持つ範囲（コンテキスト）が、そのままサービスの境界の**最有力候補**になります。例えば、「販売コンテキスト」と「在庫コンテキスト」では、「商品」という言葉の意味合いが異なります（販売では価格やSKUが重要、在庫では保管場所や数量が重要）。このコンテキストの境界が、そのまま「販売サービス」と「在庫サービス」の境界線となるのです。
    * **ユビキタス言語:** 各コンテキスト内で使われる共通言語が、そのサービスの責務と目的を明確にします。
    * **コンテキストマップ:** 各コンテキスト（サービス）がどのように連携するかを示す地図であり、サービス間の関係性を設計する上で役立ちます。

**復習のポイント:** DDDを使ってビジネスドメインを分析し、境界づけられたコンテキストを見つけ出すプロセスは、そのまま質の高いサービスの境界線を引くプロセスに直結します。

---

### ✨ クリーンアーキテクチャとの関連

クリーンアーキテクチャは、サービスという「ブラックボックス」の**内部構造**を健全に保ち、境界線を守るために役立ちます。

* **応用するクリーンアーキテクチャの知識:**
    * **依存性のルール:** クリーンアーキテクチャの中心的なルール（内側は外側を知らない）により、ビジネスの核となるドメインロジック（Entities, Use Cases）が、外部との接点（Controllers, Presenters）やインフラ（DB, Frameworks）から完全に隔離されます。
    * **Interface Adapters層:** この層にある**Controllers**が、外部からのリクエストを受け付ける公式な窓口、つまりサービスの境界そのものになります。外部の利用者はこの窓口を通じてしか、中のビジネスロジックを呼び出すことはできません。これにより、内部実装が外部に漏れ出すことを防ぎます。

**復習のポイント:** サービスのAPI（境界）は、クリーンアーキテクチャにおけるInterface Adapters層として実装されます。このアーキテクチャを採用することで、サービスの内部実装が変更されても、境界（API）さえ変わらなければ外部の利用者に影響を与えない、という理想的な状態を作り出せます。

---

### ✨ 実現するための技術

この「明確な境界」を技術的に定義し、強制するためには以下のようなものが使われます。

* **API定義言語:**
    * **OpenAPI (Swagger):** RESTful APIの「契約」を記述するための標準的な仕様です。エンドポイントのURL、リクエストの形式、レスポンスの形式などを厳密に定義できます。
    * **Protocol Buffers / gRPC:** gRPC通信で使われる、サービスのメソッドやメッセージ形式を定義するための言語です。
    * これらの定義ファイルこそが、サービスの「メニュー」であり、サービスの利用者が唯一知るべき「境界」の実体となります。

---

### ### まとめ

| 概念 | 役割 | 関連する知識・技術 |
| :--- | :--- | :--- |
| **ドメイン駆動設計** | **ビジネス的な境界**を決定する | 境界づけられたコンテキスト |
| **クリーンアーキテクチャ** | **技術的な境界**を内部で強制する | 依存性のルール, Interface Adapters |
| **API定義言語** | **境界そのもの**を形式的に記述する | OpenAPI, gRPC |