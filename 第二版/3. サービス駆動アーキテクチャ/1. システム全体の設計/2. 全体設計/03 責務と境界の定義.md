## 3. 責務と境界の定義：各サービスは何に責任を持つか？

それでは、候補として挙げた3つのサービスの**「責務と境界の定義」**を明確にしていきます。

ここでは、各サービスが「何を所有し、何に責任を持つのか」を具体的に定義します。これにより、サービスの境界線がより明確になります。
私たちは、各サービスが**所有するデータ**と、外部に**提供する主要な機能**を定義していきます。

---
### 🚀 ユーザーサービス (User Service)

* **責務**
    ユーザーの登録、認証、プロフィール情報の管理。システム内の「人」に関するすべての**真実の管理者（Single Source of Truth）**です。
* **所有するデータ**
    * `UserId`（ユーザーを一位に識別するID）
    * `UserName`
    * `EmailAddress`
    * `PasswordHash`（パスワードそのものではなく、ハッシュ化された値）
    * `Profile`（自己紹介文など）
* **提供する主要な機能（API案）**
    * `POST /users`: 新規ユーザー登録
    * `GET /users/{userId}`: ユーザー情報の取得
    * `PUT /users/{userId}`: プロフィール更新
    * `POST /auth/login`: ユーザー認証（ログイン）

---
### 🚀 記事サービス (Article Service)

* **責務**
    記事の作成、編集、削除、取得。ブログの核となる「コンテンツ」に関する**真実の管理者**です。
* **所有するデータ**
    * `ArticleId`（記事を一位に識別するID）
    * `AuthorId`（著者を示す**UserId**）
    * `Title`
    * `Content`（本文）
    * `CreatedAt`（作成日時）
    * `UpdatedAt`（更新日時）
* **提供する主要な機能（API案）**
    * `POST /articles`: 新規記事の投稿
    * `GET /articles`: 記事一覧の取得
    * `GET /articles/{articleId}`: 個別記事の取得
    * `PUT /articles/{articleId}`: 記事の更新
    * `DELETE /articles/{articleId}`: 記事の削除

---
### 🚀 コメントサービス (Comment Service)

* **責務**
    記事に対するコメントの作成、取得。記事に付随する「インタラクション」に関する**真実の管理者**です。
* **所有するデータ**
    * `CommentId`（コメントを一位に識別するID）
    * `ArticleId`（どの記事へのコメントかを示すID）
    * `AuthorId`（どのユーザーのコメントかを示すID）
    * `Content`（本文）
    * `CreatedAt`（作成日時）
* **提供する主要な機能（API案）**
    * `POST /comments`: 新規コメントの投稿
    * `GET /articles/{articleId}/comments`: 特定の記事のコメント一覧を取得

---
### 🚀 サービス間の関係性：IDによる疎な連携

ここで非常に重要なのは、各サービスが**他のサービスのデータを直接持たない**という点です。

例えば、「記事サービス」は記事の著者を示すために`AuthorId`を持っていますが、これは単なる**ID（参照）**です。`UserName`や`EmailAddress`といった著者の詳細情報は**一切持っていません**。

もし画面に「記事と著者の名前」を一緒に表示したい場合、アプリケーションはまず「記事サービス」から記事情報（`AuthorId`を含む）を取得し、次にその`AuthorId`を使って「ユーザーサービス」に著者の名前を問い合わせる、という2段階のステップを踏みます。



このように、サービス間の連携を**ID**のみに限定することで、互いの内部データ構造への依存をなくし、**疎結合**な関係を保つのです。

---
これで、各サービスの役割がかなり明確になりました。
