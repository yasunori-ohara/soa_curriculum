## 🤔 「ユビキタス言語により仕様書を書く手間を減らすことができる」という開発者にはとても喜ばれる文言で、ユビキタス言語を最初から説明することはできますか？

「**仕様書を書く手間を減らし、コードと仕様のズレをなくす**」という、開発者にとって非常に魅力的な観点を軸に、ユビキタス言語を改めて解説します。

-----

## 開発者が抱える「2冊の本」問題

従来の開発では、私たちは常に2冊の異なる「本」を管理しなければならない、という大きな悩みを抱えています。

1.  **仕様書という名の「ルールブック」** (Word, Excelなど)

      * 人間が読むための、日本語で書かれたビジネスルールの説明書。

2.  **ソースコードという名の「命令書」** (Python, Javaなど)

      * コンピューターが実行するための、プログラミング言語で書かれた命令書。

この2冊を常に同期させ続けるのは、悪夢のような作業です。コードを修正しても仕様書を直し忘れたり、仕様書の変更がコードに反映されなかったり… その結果、仕様書はすぐに**化石化**し、誰も信用しない「嘘つきなドキュメント」になってしまいます。

-----

## ユビキタス言語：2冊の本を1冊に統合する技術

**ユビキタス言語**は、この根本的な問題を解決するためのアプローチです。
「**もし、ソースコード自体が、最も正確で信頼できる仕様書になれば、2冊の本を管理する手間はなくなるのではないか？**」という発想に基づいています。

### 具体的なステップ

#### 1\. チームで「共通言語」を定義する

まず、開発者とビジネスの専門家が協力し、ビジネスルールを表現するための「言葉の辞書」を作ります。

**📝 辞書（例）**

  * `顧客種別 (CustomerType)`: `一般 (REGULAR)`, `法人 (CORPORATE)`
  * `客室等級 (RoomGrade)`: `通常 (STANDARD)`, `スイート (SUITE)`
  * `予約 (Reservation)`

#### 2\. その言語で「話す」コードを書く

次に、この辞書の言葉だけを使ってコードを記述します。

#### 👎 Before: 「2冊の本」が必要なコード

このコードを読むだけでは、`user_type`の`2`や`room_grade`の`5`が何を意味するのか全く分かりません。意味を知るためには、**必ずExcelの仕様書を参照しにいく必要があります**。

`仕様書.xlsx`
| ルールID | 条件 | 振る舞い |
| :--- | :--- | :--- |
| CANCEL-01 | user\_type=2, room\_grade=5 | オンラインキャンセル不可 |

`reservation.py`

```python
def can_cancel_online(user_type: int, room_grade: int) -> bool:
    # 法人(2)によるスイート(5)の予約はキャンセル不可
    if user_type == 2 and room_grade == 5:
        return False
    return True
```

#### 👍 After: 「1冊」で完結するコード (ユビキタス言語)

ユビキタス言語で定義した言葉を、`Enum`や`class`としてコードに直接埋め込みます。

`reservation.py`

```python
from enum import Enum

# --- 辞書がそのままコードの一部になる ---
class CustomerType(Enum):
    REGULAR = 1
    CORPORATE = 2

class RoomGrade(Enum):
    STANDARD = 3
    SUITE = 5
# ------------------------------------

class Reservation:
    # ...
    def can_cancel_online(self) -> bool:
        # このコード自体が、もはや仕様書となっている
        if (self.customer.type == CustomerType.CORPORATE and
            self.room.grade == RoomGrade.SUITE):
            return False
        return True
```

このコードは、もはやExcelの仕様書を必要としません。`if`文を読むだけで、「**法人の顧客による、スイート等級の部屋の予約は、オンラインキャンセルできない**」というビジネスルールが、誰にでも明確に理解できます。

-----

### \#\# 結論

ユビキタス言語を徹底することで、私たちは**化石化する運命にある仕様書（ルールブック）のメンテナンス作業から解放されます**。

コードが、常に最新で、実際に動作し、テスト可能な\*\*「生きた仕様書」\*\*となるのです。これにより、仕様書作成の手間が減るだけでなく、コードと仕様のズレに起因する多くのバグを防ぐことができ、開発者はより創造的な仕事に集中できるようになります。