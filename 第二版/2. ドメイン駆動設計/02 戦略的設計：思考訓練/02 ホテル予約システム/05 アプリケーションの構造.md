## アプリケーションの構造

コンテキストの地図が描け、関係性の定義もできました。

次のステップは、この作成した「地図」が、**実際の開発チームの体制や、システムの物理的なアーキテクチャ（マイクロサービスなど）に、どのように影響を与えるか**を理解することです。

***
### 地図から「チーム」と「サービス」を設計する

私たちが作成したコンテキストマップは、単なる抽象的な図ではありません。これは、開発チームの分け方や、具体的なアプリケーションの分け方を決定するための、極めて実践的な**「青写真」**となります。



---
#### 1. コンテキストとチーム編成（コンウェイの法則）

「**システムの構造は、開発チームのコミュニケーション構造を反映する**」という、コンウェイの法則と呼ばれる経験則があります。

DDDでは、これを逆手に取ります。つまり、**理想的なシステムの構造（コンテキストマップ）に合わせて、チームの構造を意図的に設計する**のです。

* **予約コンテキスト** → **予約チーム**
    * 予約に関する機能開発と運用に責任を持つ専門チーム。
* **顧客管理コンテキスト** → **顧客チーム**
    * 顧客情報の管理に責任を持つ専門チーム。
* **決済コンテキスト** → **決済チーム**
    * 支払い機能に責任を持つ専門チーム。

このように、各チームは自分たちのコンテキストの境界内で自律的に意思決定を行い、開発を進めることができます。コンテキストマップに定義された連携ルール（ACLなど）が、チーム間の公式なコミュニケーション窓口となります。

### 2. コンテキストとアプリケーションの構造

戦略的設計で「境界づけられたコンテキスト」を見つけ出すことは、アプリケーション全体の構造をどのように組み立てるか、という**物理的な設計**にも直接つながります。

境界づけられたコンテキストは、それぞれが**独立したアプリケーション（または、一つのアプリケーション内の独立したモジュール）**の、理想的な候補となります。

* **予約コンテキスト** → **予約アプリケーション (または予約モジュール)**
* **顧客管理コンテキスト** → **顧客管理アプリケーション (または顧客モジュール)**
* **決済コンテキスト** → **決済アプリケーション (または決済モジュール)**


これにより、巨大な一枚岩のアプリケーション（モノリス）を開発するのではなく、**ビジネスの関心事ごとに分割された、見通しの良い構造**としてシステムを構築できます。これには、以下のような大きなメリットがあります。

* **関心事の分離**: 決済に関するコードは決済モジュールに、予約に関するコードは予約モジュールに集約されます。これにより、コードの可読性と保守性が向上します。
* **影響範囲の限定**: 決済モジュールの変更が、予約モジュールに予期せぬ影響を与えるリスクを低減できます。
* **チームの専門性**: 決済チームは決済モジュールに、予約チームは予約モジュールに集中することで、それぞれのチームが専門性を高めやすくなります。

---
### すべての知識の繋がり

これで、私たちが学んできたことの全体像が見えてきました。

1.  **戦略的設計 (DDD)**:
    システム全体の**地図**を描き、アプリケーションの**論理的な分割単位**を見つけ出しました。

2.  **クリーンアー-キテクチャ**:
    その個々の分割単位（例：予約モジュール）を構築するための、**建築様式（設計ルール）**となります。

3.  **戦術的設計 (DDD)**:
    その建築様式の中で、中心となるビジネスロ-ジックを実装するための、高品質な**建築資材**（集約、値オブジェクト、リポジトリ）となります。

この一連の流れを理解されたことで、あなたはDDDとクリーンアーキテクチャを組み合わせた、モダンなソフトウェア設計の基本をマスターしたと言えるでしょう。