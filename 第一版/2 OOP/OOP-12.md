# OOP-12

### 【補足説明】上位レベルとは相対的・再帰的である

私たちが`Store`クラスと`Product`クラスの関係をリファクタリングしたとき、実はこの重要な設計原理を実践していました。

この文脈では、Storeクラスが上位レベル（方針）でした。「注文を受け付けたら、商品の在庫を確認し、減らす」という方針を決定するからです。

一方で、PhysicalProductやDigitalProductといった具体的なクラスは下位レベル（詳細）でした。在庫を「どうやって」確認し、「どうやって」減らすかという詳細を実装したからです。

「上位」である`Store`は、「下位」である具体的な商品クラスに依存せず、`Product`という抽象にのみ依存しました。

しかし、このStoreクラスは本当に常に「上位」なのでしょうか？

もし、アプリケーション全体という、より大きな視点から見れば、このStoreクラスでさえも、より大きな方針を実現するための一つの「詳細」に過ぎないのかもしれません。

この「上位」と「下位」が相対的であり、マトリョーシカ人形のように再帰的な構造になっていることこそが、次のクリーンアーキテクチャを理解する鍵となります。