# OOP-05

## 今回の変更の補足説明

今回は「インターフェース」と「継承」の両方の概念を同時に、そして密接に連携させて用いた変更です。「インターフェース」と「継承」は、この設計において切り離すことのできない、車の両輪のような関係にあります。

この関係を、**契約書**に例えてみましょう。

---

### 1. インターフェースの役割：「契約書」を定義する

`Product`という抽象基底クラス（ABC）は、**インターフェース**として機能しています。

これは、「これから『商品』として扱われるクラスは、以下の項目（メソッド）を必ず持たなければならない」という**契約書**を定義しているのと同じです。

- `check_stock()` : 在庫を確認する能力
- `reduce_stock()`: 在庫を減らす能力
- `get_stock()` : 在庫数を報告する能力

この契約書があるおかげで、`Store`クラスは安心して「このオブジェクトは『商品』だから、絶対に在庫確認ができるはずだ」と信頼して仕事を任せることができます。

---

### 2. 継承の役割：契約書に「署名」する

`PhysicalProduct`と`DigitalProduct`が`Product`を**継承**する (`class PhysicalProduct(Product):`) というコードは、この契約書に**署名する行為**に相当します。

- `PhysicalProduct`は、「私は『商品』です。契約書通り、在庫を物理的に確認・増減させます」と署名し、その具体的な方法を実装します。
- `DigitalProduct`は、「私も『商品』です。契約書通り、在庫は常にOKとみなし、在庫増減は行いません」と署名し、自分なりの方法を実装します。

**継承**は、この契約（インターフェース）を守ることを宣言し、その具体的な内容を実装するための**メカニズム（手段）**なのです。

---

### まとめ

| 概念 | 役割 | コード上の表現 |
| --- | --- | --- |
| **インターフェース** | **ルール・契約**を定義する | `Product(ABC)` |
| **継承** | その契約を**守ることを宣言**し、実装する | `class PhysicalProduct(Product):` |

結論として、この変更は**「インターフェースとして定義された契約を、継承というメカニズムを使って実現した」**と言うのが最も正確な表現です。この2つが組み合わさることで、`Store`クラスが相手の種類を気にせずに済む「ポリモーフィズム」が実現できています。