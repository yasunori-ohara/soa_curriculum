# DDD-02

## DDDを適用したプログラム

DDDを適用したプログラムの解説も、クリーンアーキテクチャの時と同様に、**「内側から外側へ」**進めるのが最も効果的です。

DDDの目的は、アプリケーションの中心にある**ドメインモデルを豊かにすること**です。したがって、その最も変化の大きかった中心部から説明を始めることで、「なぜこのリファクタリングが必要だったのか」が最もよく理解できます。

---

### 推奨される説明の順番

### 1. **`domain/product.py` (エンティティ)**

- **なぜ最初か？**: まずは土台の確認です。このファイルはDDDのリファクタリングで大きな変更はありませんでしたが、`Order`集約が依存する、より基本的なドメインオブジェクト（エンティティ）として最初に再確認するのが適切です。

### 2. **`domain/order.py` (新しい集約)**

- **なぜ2番目か？**: ここが今回の**リファクタリングの主役**です。DDDの核心である「集約（アグリゲート）」という新しい概念が、`Order`クラスとして導入されました。ビジネスの複雑なルールがどのようにカプセル化されたか、その魂の部分を次に説明します。

### 3. **`use_cases/interfaces.py` (更新されたインターフェース)**

- **なぜ3番目か？**: 新しい「宝物」（`Order`集約）ができたので、それを保管庫に出し入れするための新しい「鍵穴」（`OrderRepository`インターフェース）を定義する必要があります。ユースケースが外部と結ぶ新しい契約書をここで確認します。

### 4. **`use_cases/process_order.py` (役割が変わったユースケース)**

- **なぜ4番目か？**: ドメインモデルが豊かになった結果、このユースケースの役割が大きく変わりました。以前は多くのビジネスロジックを持っていた「働き者」でしたが、今回は集約に仕事を任せる「指揮者・調整役」になっています。その役割の変化を説明します。

### 5. **`interface_adapters/repositories.py` (新しいアダプター)**

- **なぜ5番目か？**: 新しく定義された`OrderRepository`という契約書を、具体的に実装するアダプターを説明します。

### 6. **`main.py` (組立工場の変更)**

- **なぜ最後か？**: 新しい部品（`OrderRepository`）が増えたことで、組立工場がどのようにそれらを組み立てるように変更されたかを最後に確認します。

---

この順番で進めるのが最も理解しやすいかと思います。