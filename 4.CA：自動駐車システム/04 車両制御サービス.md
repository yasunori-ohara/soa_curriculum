# 04 è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹

# ğŸ¦¾ è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹ (Control Service)

è‡ªå‹•é§è»Šã‚·ã‚¹ãƒ†ãƒ ã®æœ€çµ‚ã‚¹ãƒ†ãƒƒãƒ—ã€ã€Œæ‰‹è¶³ã€ã‚’æ‹…å½“ã™ã‚‹ã€Œè»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹ã€ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€çµŒè·¯è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ãŒä½œæˆã—ãŸã€Œå‹•ä½œã‚³ãƒãƒ³ãƒ‰ï¼ˆè¨ˆç”»ï¼‰ã€ã‚’å¿ å®Ÿã«å®Ÿè¡Œã—ã€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ï¼ˆãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚„ã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°ï¼‰ã‚’åˆ¶å¾¡ã™ã‚‹è²¬ä»»ã‚’æŒã¡ã¾ã™ã€‚

---

## ğŸ—ºï¸ ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã®å…¨ä½“åƒï¼ˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã¨ä¾å­˜é–¢ä¿‚ï¼‰

ã“ã®ã€Œè»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹ã€ã‚‚ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦è¨­è¨ˆã•ã‚Œã¾ã™ã€‚
UseCaseï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰ã‚’ä¸­å¿ƒï¼ˆå†…å´ï¼‰ã«ç½®ãã€å…·ä½“çš„ãªå®Ÿè£…ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å…¥å‡ºåŠ›ã€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢åˆ¶å¾¡ï¼‰ã‚’**Adapterså±¤**ï¼ˆå¤–å´ï¼‰ã«é…ç½®ã—ã¾ã™ã€‚

![ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](../ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£.png)

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
control_service/
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ entities.py         # [Entity] ParkingPlan(å¥‘ç´„), VehicleState ãªã©
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ boundaries.py       # [å¢ƒç•Œ] Subscriber/Actuator ãªã©ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â””â”€â”€ use_cases.py        # [UseCase] ExecutePlanUseCase ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ adapters/
â”‚   â”œâ”€â”€ file_subscriber.py  # [Adapterså±¤] FilePlanSubscriber (å…¥åŠ›å®Ÿè£…)
â”‚   â”œâ”€â”€ stub_actuator.py    # [Adapterså±¤] StubActuatorAdapter (å‡ºåŠ›å®Ÿè£…)
â”‚   â””â”€â”€ repositories.py     # [Adapterså±¤] InMemoryVehicleStateRepository (çŠ¶æ…‹å®Ÿè£…)
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ ...                 # (ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰)
â””â”€â”€ main.py                 # [èµ·å‹•] DIã‚³ãƒ³ãƒ†ãƒŠã€å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«

```

---

## ğŸ¯ è²¬å‹™ï¼šè¨ˆç”»ã‚’å¿ å®Ÿã«å®Ÿè¡Œã™ã‚‹

è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹ã®å”¯ä¸€ã®è²¬å‹™ã¯ã€ã€ŒçµŒè·¯è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ãŒä½œæˆã—ãŸ\*å‹•ä½œã‚³ãƒãƒ³ãƒ‰\*ï¼ˆè¨ˆç”»ï¼‰ã‚’èª­ã¿è¾¼ã¿ã€ãã‚Œã‚’è§£é‡ˆã—ã¦ã€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ï¼ˆã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°ã€ãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼‰ã«å…·ä½“çš„ãªæŒ‡ç¤ºã‚’å‡ºã™ã“ã¨ã€ã§ã™ã€‚

```
[ å‹•ä½œã‚³ãƒãƒ³ãƒ‰ (ãƒ•ã‚¡ã‚¤ãƒ«) ] -------> [ è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹ ] --------> [ ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ (å‡ºåŠ›) ]
(ãƒãƒ³ãƒ‰ãƒ«è§’åº¦ã€é€Ÿåº¦ãªã©)              (Control)                   (ã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°ã€ãƒ¢ãƒ¼ã‚¿ãƒ¼)
                                   - ã‚³ãƒãƒ³ãƒ‰è§£é‡ˆ
                                   - ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢åˆ¶å¾¡

```

ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€`plan.json` ã«è¨˜è¼‰ã•ã‚ŒãŸæ™‚ç³»åˆ—ã®ã‚³ãƒãƒ³ãƒ‰ï¼ˆä¾‹ï¼šã€Œãƒãƒ³ãƒ‰ãƒ«ã‚’å³ã«30åº¦ã€ã€Œ1.5ç§’é–“å¾Œé€€ã€ï¼‰ã‚’é †ç•ªã«èª­ã¿è¾¼ã¿ã€å¯¾å¿œã™ã‚‹ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¢ãƒ€ãƒ—ã‚¿ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

---

## ğŸ§© ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚‚ã€ç‹¬ç«‹ã—ãŸã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§æ§‹æˆã•ã‚Œã¾ã™ã€‚

### ä¸»è¦ãªEntities

ãƒ“ã‚¸ãƒã‚¹ã®æ ¸ã¨ãªã‚‹æ¦‚å¿µã¨ãƒ«ãƒ¼ãƒ«ã‚’å®šç¾©ã—ã¾ã™ã€‚

- **ParkingPlan / ControlCommand (å¥‘ç´„)**: çµŒè·¯è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰å—ã‘å–ã‚‹ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ã§ã™ã€‚ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã“ã‚Œã‚‰ã‚’ã€ŒEntityã€ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚
- **VehicleState**: ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ä¸­å¿ƒã¨ãªã‚‹Entityï¼ˆã¾ãŸã¯ãƒªãƒã‚¸ãƒˆãƒªã®ç®¡ç†å¯¾è±¡ï¼‰ã€‚ç¾åœ¨ã®è»Šä¸¡ã®çŠ¶æ…‹ï¼ˆä¾‹ï¼šç¾åœ¨ã®ãƒãƒ³ãƒ‰ãƒ«è§’åº¦ã€é€Ÿåº¦ã€ä½ç½®ï¼‰ã‚’ä¿æŒã—ã¾ã™ã€‚`update_state()` ãªã©ã®ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã‚’æŒã¡ã¾ã™ã€‚

```python
# domain/entities.py (è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹å†…)
from dataclasses import dataclass, field
from datetime import datetime
from typing import List

# --- çµŒè·¯è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®ã€Œå¥‘ç´„ã€ã¨ã—ã¦å®šç¾©ã•ã‚Œã‚‹Entity ---
# (â€»æœ¬æ¥çš„ã«ã¯å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ã‚¹ã‚­ãƒ¼ãƒã§å®šç¾©ãƒ»å…±æœ‰ã•ã‚Œã‚‹)

@dataclass
class ControlCommand:
    """çµŒè·¯è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰å—ã‘å–ã‚‹å€‹åˆ¥ã®åˆ¶å¾¡å‘½ä»¤"""
    action: str  # (ä¾‹: 'steer', 'throttle')
    value: float # (ä¾‹: 30.0 [åº¦], -0.5 [m/s^2])
    duration: float # (ä¾‹: 1.5 [ç§’])

# -----------------------------------------------------------------------------
# ParkingPlan Entity (å…¥åŠ›ãƒ‡ãƒ¼ã‚¿)
# - ã‚¯ãƒ©ã‚¹å›³ã®ä½ç½®: Entities
# - åŒå¿ƒå††å›³ã®ä½ç½®: Entities (æœ€ã‚‚å†…å´)
# -----------------------------------------------------------------------------
@dataclass
class ParkingPlan:
    """çµŒè·¯è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰å—ã‘å–ã‚‹ã€Œé§è»Šè¨ˆç”»ã€ã‚’è¡¨ã™Entity"""
    timestamp: datetime
    commands: List[ControlCommand] = field(default_factory=list)

# --- ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆè»Šä¸¡åˆ¶å¾¡ï¼‰ãŒå®šç¾©ã™ã‚‹Entity ---

# -----------------------------------------------------------------------------
# VehicleState Entity (å†…éƒ¨çŠ¶æ…‹)
# - ã‚¯ãƒ©ã‚¹å›³ã®ä½ç½®: Entities
# - åŒå¿ƒå††å›³ã®ä½ç½®: Entities (æœ€ã‚‚å†…å´)
# -----------------------------------------------------------------------------
@dataclass
class VehicleState:
    """ç¾åœ¨ã®è»Šä¸¡ã®çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹Entity"""
    current_steer_angle: float = 0.0
    current_speed: float = 0.0
    last_updated: datetime = field(default_factory=datetime.now)

    def update_state(self, command: ControlCommand):
        """[ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«] å®Ÿè¡Œã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã«åŸºã¥ãçŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹"""
        if command.action == 'steer':
            self.current_steer_angle = command.value
        elif command.action == 'throttle':
            # (â€» æœ¬æ¥ã¯ç‰©ç†æ¼”ç®—ã«åŸºã¥ãé€Ÿåº¦ã‚’æ›´æ–°ã™ã‚‹ãŒã€ã“ã“ã§ã¯å˜ç´”åŒ–)
            self.current_speed = command.value
        self.last_updated = datetime.now()

```

### ä¸»è¦ãªUseCase

ç‰¹å®šã®ã‚·ãƒŠãƒªã‚ªã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ­ãƒ¼ã‚’å®šç¾©ã—ã¾ã™ã€‚

- **ExecutePlanUseCase**: `ParkingPlan` ã‚’èª­ã¿è¾¼ã¿ã€è¨ˆç”»ã«å«ã¾ã‚Œã‚‹ `ControlCommand` ã‚’ä¸€ã¤ãšã¤é †ç•ªã«å®Ÿè¡Œï¼ˆãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¢ãƒ€ãƒ—ã‚¿ã‚’å‘¼ã³å‡ºã—ï¼‰ã€å†…éƒ¨çŠ¶æ…‹ï¼ˆ`VehicleState`ï¼‰ã‚’æ›´æ–°ã™ã‚‹ã€ã¨ã„ã†ä¸€é€£ã®æµã‚Œã‚’æ‹…å½“ã—ã¾ã™ã€‚

```python
# application/use_cases/execute_plan.py (è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹å†…)
from application.boundaries import (
    PlanSubscriberInterface,
    VehicleStateRepositoryInterface,
    ActuatorInterface,
    ExecutePlanInputBoundary # InputBoundaryã‚‚boundaries.pyã§å®šç¾©æƒ³å®š
)
import asyncio # (ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§æ™‚é–“å¾…ã¡ã™ã‚‹ãŸã‚)

# -----------------------------------------------------------------------------
# Use Case
# - ã‚¯ãƒ©ã‚¹å›³ã®ä½ç½®: UseCase
# - åŒå¿ƒå††å›³ã®ä½ç½®: Use Cases
# -----------------------------------------------------------------------------
class ExecutePlanUseCase(ExecutePlanInputBoundary):
    def __init__(self,
                 plan_sub: PlanSubscriberInterface,
                 state_repo: VehicleStateRepositoryInterface,
                 actuator: ActuatorInterface):
        # DIã«ã‚ˆã‚Šã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹(æŠ½è±¡)ã®ã¿ã‚’å—ã‘å–ã‚‹
        self._plan_sub = plan_sub
        self._state_repo = state_repo
        self._actuator = actuator

    async def handle(self):
        # 1. é§è»Šè¨ˆç”»ã‚’å–å¾— (éåŒæœŸI/O)
        #    (å…·ä½“çš„ãªãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã®å®Ÿè£…ã¯çŸ¥ã‚‰ãªã„)
        plan = await self._plan_sub.get_plan()
        if not plan:
            print("[UseCase] Parking Plan not found. Skipping execution.")
            return

        print(f"[UseCase] Executing plan with {len(plan.commands)} commands...")

        # 2. è¨ˆç”»ã®ã‚³ãƒãƒ³ãƒ‰ã‚’é †ç•ªã«å®Ÿè¡Œ
        for command in plan.commands:

            # 3. ç¾åœ¨ã®è»Šä¸¡çŠ¶æ…‹ã‚’å–å¾— (å†…éƒ¨çŠ¶æ…‹)
            current_state = self._state_repo.get()

            # (â€» ã“ã“ã§ state ã¨ command ã«åŸºã¥ãäº‹å‰ãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯ãŒå…¥ã‚‹)
            print(f"[UseCase] Executing command: {command.action}={command.value} for {command.duration}s")

            # 4. ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ï¼ˆã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚¿ï¼‰ã«æŒ‡ç¤º (éåŒæœŸI/O)
            #    (å…·ä½“çš„ãªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢åˆ¶å¾¡ã®å®Ÿè£…ã¯çŸ¥ã‚‰ãªã„)
            await self._actuator.execute_command(command)

            # (ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚é–“ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ)
            await asyncio.sleep(command.duration)

            # 5. å®Ÿè¡Œå¾Œã®è»Šä¸¡çŠ¶æ…‹ã‚’æ›´æ–°ãƒ»ä¿å­˜ (å†…éƒ¨çŠ¶æ…‹)
            current_state.update_state(command)
            self._state_repo.save(current_state)

        print("[UseCase] Plan execution finished.")

```

---

## ğŸ”Œ é‡è¦ãªå¢ƒç•Œ (Boundaries)

ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã®UseCaseãŒå¤–éƒ¨ã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹ãŸã‚ã®ã€Œå¥‘ç´„æ›¸ï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ã€ã§ã™ã€‚

```python
# application/boundaries.py (è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹å†…)
from abc import ABC, abstractmethod
from domain.entities import ParkingPlan, VehicleState, ControlCommand # ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒæ‰±ã†Entity
from typing import Optional

# --- 1. å…¥åŠ›å¢ƒç•Œï¼šPlanSubscriberInterface ---
# --------------------------------------------------------------------
# - ã‚¯ãƒ©ã‚¹å›³ã®ä½ç½®: <I>ServiceAdapterInterface (DataAccessInterfaceã®ä¸€ç¨®)
# - åŒå¿ƒå††å›³ã®ä½ç½®: å††ã¨å††ã®å¢ƒç•Œç·šãã®ã‚‚ã®
# --------------------------------------------------------------------
class PlanSubscriberInterface(ABC):
    @abstractmethod
    async def get_plan(self) -> Optional[ParkingPlan]:
        """çµŒè·¯è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ãŒå…¬é–‹ã—ãŸé§è»Šè¨ˆç”»ã‚’å–å¾—ã™ã‚‹ (éåŒæœŸ)"""
        raise NotImplementedError

# --- 2. å‡ºåŠ›å¢ƒç•Œï¼šActuatorInterface ---
# --------------------------------------------------------------------
# - ã‚¯ãƒ©ã‚¹å›³ã®ä½ç½®: <I>HardwareInterface (DataAccessInterfaceã®ä¸€ç¨®)
# - åŒå¿ƒå††å›³ã®ä½ç½®: å††ã¨å††ã®å¢ƒç•Œç·šãã®ã‚‚ã®
# --------------------------------------------------------------------
class ActuatorInterface(ABC):
    @abstractmethod
    async def execute_command(self, command: ControlCommand):
        """è¨ˆç®—ã•ã‚ŒãŸåˆ¶å¾¡ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ï¼ˆã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚¿ï¼‰ã«é€ä¿¡ã™ã‚‹ (éåŒæœŸ)"""
        raise NotImplementedError

# --- 3. å†…éƒ¨çŠ¶æ…‹å¢ƒç•Œï¼šVehicleStateRepositoryInterface ---
# --------------------------------------------------------------------
# - ã‚¯ãƒ©ã‚¹å›³ã®ä½ç½®: <I>DataAccessInterface
# - åŒå¿ƒå††å›³ã®ä½ç½®: å††ã¨å††ã®å¢ƒç•Œç·šãã®ã‚‚ã®
# --------------------------------------------------------------------
class VehicleStateRepositoryInterface(ABC):
    @abstractmethod
    def get(self) -> VehicleState:
        """ç¾åœ¨ã®è»Šä¸¡çŠ¶æ…‹ã‚’å–å¾—ã™ã‚‹"""
        raise NotImplementedError

    @abstractmethod
    def save(self, state: VehicleState):
        """è»Šä¸¡çŠ¶æ…‹ã‚’ä¿å­˜ã™ã‚‹"""
        raise NotImplementedError

# --- 4. UseCaseè‡ªä½“ã®å…¥åŠ›å¢ƒç•Œ (å‚è€ƒ) ---
class ExecutePlanInputBoundary(ABC):
    @abstractmethod
    async def handle(self):
        raise NotImplementedError

```

---

## âš™ï¸ Adapterså±¤ï¼šå…·ä½“çš„ãªå®Ÿè£…ï¼ˆã‚¢ãƒ€ãƒ—ã‚¿ï¼‰

`application/boundaries.py`ã§å®šç¾©ã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¥‘ç´„æ›¸ï¼‰ã‚’ã€ã“ã“ã§**å…·ä½“çš„ã«å®Ÿè£…**ã—ã¾ã™ã€‚`adapters/` ãƒ•ã‚©ãƒ«ãƒ€ã«ã™ã¹ã¦ã®å®Ÿè£…ã‚’é›†ç´„ã—ã¾ã™ã€‚

### 1. å…¥åŠ›ã‚¢ãƒ€ãƒ—ã‚¿ã®å®Ÿè£… (ã‚µãƒ¼ãƒ“ã‚¹é–“å…¥åŠ›)

`PlanSubscriberInterface`ã‚’å®Ÿè£…ã—ã¾ã™ã€‚SOAã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã€çµŒè·¯è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ãŒæ›¸ãå‡ºã—ãŸ `plan.json` ã‚’èª­ã¿è¾¼ã‚€ï¼ˆè³¼èª­ã™ã‚‹ï¼‰ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚

```python
# adapters/file_subscriber.py (è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹å†…)
import json
import asyncio
from domain.entities import ParkingPlan, ControlCommand # Entityå®šç¾©ãŒå¿…è¦
from application.boundaries import PlanSubscriberInterface
from typing import Optional
from datetime import datetime

# -----------------------------------------------------------------------------
# Service Adapter Implementation (File Subscriber)
# - ã‚¯ãƒ©ã‚¹å›³ã®ä½ç½®: ServiceAdapter
# - åŒå¿ƒå††å›³ã®ä½ç½®: Adapters (å¤–å´ã®å††)
# -----------------------------------------------------------------------------
class FilePlanSubscriber(PlanSubscriberInterface):
    """
    UseCaseã®è¦æ±‚(I/F)ã«åŸºã¥ãã€ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆJSONï¼‰ã‹ã‚‰
    ParkingPlanã‚’èª­ã¿è¾¼ã‚€ï¼ˆè³¼èª­ã™ã‚‹ï¼‰ã‚¢ãƒ€ãƒ—ã‚¿ã€‚
    """
    def __init__(self, filepath="plan.json"):
        self._filepath = filepath

    async def get_plan(self) -> Optional[ParkingPlan]:
        print(f"[Adapter] FileSubscriber: Reading Parking Plan from {self._filepath}...")
        try:
            await asyncio.sleep(0.01) # éåŒæœŸI/Oã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            with open(self._filepath, "r") as f:
                data = json.load(f)

            # JSONè¾æ›¸ã‹ã‚‰ParkingPlan Entityã«å¤‰æ›ã™ã‚‹
            plan = ParkingPlan(
                timestamp=datetime.fromisoformat(data["timestamp"]),
                commands=[ControlCommand(**cmd) for cmd in data["commands"]]
            )
            return plan
        except FileNotFoundError:
            print("[Adapter] FileSubscriber: Parking Plan file not found.")
            return None
        except Exception as e:
            print(f"[Adapter] FileSubscriber: Error reading Parking Plan: {e}")
            return None

```

### 2. å‡ºåŠ›ã‚¢ãƒ€ãƒ—ã‚¿ã®å®Ÿè£… (ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢å‡ºåŠ›)

`ActuatorInterface`ã‚’å®Ÿè£…ã—ã¾ã™ã€‚å®Ÿéš›ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ï¼ˆã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°ã€ãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼‰ã¨é€šä¿¡ã™ã‚‹ä»£ã‚ã‚Šã«ã€ä»Šå›ã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å®Ÿè¡Œå†…å®¹ã‚’ã€Œè¡¨ç¤ºã€ã™ã‚‹ã‚¹ã‚¿ãƒ–ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚

```python
# adapters/stub_actuator.py (è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹å†…)
import asyncio
from domain.entities import ControlCommand
from application.boundaries import ActuatorInterface

# -----------------------------------------------------------------------------
# Hardware Adapter Implementation (Stub)
# - ã‚¯ãƒ©ã‚¹å›³ã®ä½ç½®: HardwareAdapter
# - åŒå¿ƒå††å›³ã®ä½ç½®: Adapters (å¤–å´ã®å††)
# -----------------------------------------------------------------------------
class StubActuatorAdapter(ActuatorInterface):
    """
    ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ï¼ˆã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚¿ï¼‰ã®ãƒ€ãƒŸãƒ¼ï¼ˆã‚¹ã‚¿ãƒ–ï¼‰ã€‚
    UseCaseã®è¦æ±‚(I/F)ã«åŸºã¥ãã€åˆ¶å¾¡ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã™ã‚‹ã€‚
    """
    async def execute_command(self, command: ControlCommand):
        """åˆ¶å¾¡ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã«é€ä¿¡ã™ã‚‹ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰"""

        # éåŒæœŸI/Oï¼ˆä¾‹: CANãƒã‚¹é€šä¿¡ï¼‰ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
        await asyncio.sleep(0.05)

        if command.action == 'steer':
            print(f"[Adapter] StubActuator: STEER set to {command.value} degrees")
        elif command.action == 'throttle':
            print(f"[Adapter] StubActuator: THROTTLE set to {command.value} m/s^2")
        else:
            print(f"[Adapter] StubActuator: Unknown command {command.action}")

```

### 3. ãƒªãƒã‚¸ãƒˆãƒªã‚¢ãƒ€ãƒ—ã‚¿ã®å®Ÿè£… (å†…éƒ¨çŠ¶æ…‹)

`VehicleStateRepositoryInterface`ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ç¾åœ¨ã®è»Šä¸¡çŠ¶æ…‹ï¼ˆ`VehicleState`ï¼‰ã‚’ãƒ¡ãƒ¢ãƒªä¸Šã«ä¿æŒã—ã¾ã™ã€‚

```python
# adapters/repositories.py (è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹å†…)
from domain.entities import VehicleState
from application.boundaries import VehicleStateRepositoryInterface
from datetime import datetime

# -----------------------------------------------------------------------------
# Data Access Implementation (In-Memory)
# - ã‚¯ãƒ©ã‚¹å›³ã®ä½ç½®: DataAccess
# - åŒå¿ƒå††å›³ã®ä½ç½®: Adapters (å¤–å´ã®å††)
# -----------------------------------------------------------------------------
class InMemoryVehicleStateRepository(VehicleStateRepositoryInterface):
    """
    ç¾åœ¨ã®è»Šä¸¡çŠ¶æ…‹(VehicleState)ã‚’ãƒ¡ãƒ¢ãƒªä¸Šã«ä¿æŒã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã€‚
    """
    def __init__(self):
        self._state = VehicleState(last_updated=datetime.now())
        print("[Adapter] InMemoryRepo: Initialized.")

    def get(self) -> VehicleState:
        print("[Adapter] InMemoryRepo: Getting VehicleState from memory.")
        return self._state

    def save(self, state: VehicleState):
        print("[Adapter] InMemoryRepo: Saving VehicleState to memory.")
        self._state = state

```

---

## ğŸš€ èµ·å‹•ãƒ•ã‚¡ã‚¤ãƒ« ([main.py](http://main.py/))ï¼šã™ã¹ã¦ã‚’çµåˆã™ã‚‹

ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
`Adapters`å±¤ã®å…·ä½“çš„ãªå®Ÿè£…ï¼ˆ`FilePlanSubscriber`, `StubActuatorAdapter`ãªã©ï¼‰ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã€`UseCase`ã«ã€Œæ³¨å…¥ï¼ˆDIï¼‰ã€ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚

```python
# main.py (è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹å†…)
import asyncio
from application.use_cases import ExecutePlanUseCase
from adapters.file_subscriber import FilePlanSubscriber
from adapters.repositories import InMemoryVehicleStateRepository
from adapters.stub_actuator import StubActuatorAdapter

# -----------------------------------------------------------------------------
# Entry Point (Main Application)
# - ã‚¯ãƒ©ã‚¹å›³ã®ä½ç½®: Main (DIã‚³ãƒ³ãƒ†ãƒŠã®å½¹å‰²)
# - åŒå¿ƒå††å›³ã®ä½ç½®: æœ€ã‚‚å¤–å´ã®å±¤ (Frameworks & Drivers)
# -----------------------------------------------------------------------------
async def main():
    """
    ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã€ä¾å­˜é–¢ä¿‚ã‚’æ³¨å…¥ (DI) ã™ã‚‹ã€‚
    """
    print("--- [Control Service] Starting Up ---")

    # 1. Adapterså±¤ï¼ˆå…·ä½“çš„ãªå®Ÿè£…ï¼‰ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–
    plan_subscriber = FilePlanSubscriber(filepath="plan.json")
    state_repository = InMemoryVehicleStateRepository()
    actuator_adapter = StubActuatorAdapter()

    # 2. UseCaseå±¤ã«ã€å…·ä½“çš„ãªå®Ÿè£…ã‚’ã€Œä¾å­˜æ€§ã®æ³¨å…¥ (DI)ã€
    use_case = ExecutePlanUseCase(
        plan_sub=plan_subscriber,
        state_repo=state_repository,
        actuator=actuator_adapter
    )

    # 3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆUseCaseï¼‰ã®å®Ÿè¡Œ
    print("\\n--- [Control Service] Running UseCase ---")
    try:
        # UseCaseã®handleãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™
        await use_case.handle()
        print("--- [Control Service] UseCase Finished ---")
    except Exception as e:
        print(f"--- [Control Service] Error: {e} ---")

if __name__ == "__main__":
    # ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆè»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹ï¼‰ã‚’å®Ÿè¡Œ
    asyncio.run(main())

```

---

## ğŸ’¡ ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§ã‚µãƒ¼ãƒ“ã‚¹å¢ƒç•Œã‚’æ¤œè¨¼ã™ã‚‹

UseCaseã®ãƒ†ã‚¹ãƒˆã§ã¯ã€`Adapters`å±¤ã®ã™ã¹ã¦ã‚’å½ç‰©ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ã«å·®ã—æ›¿ãˆã¦ã€ãƒ­ã‚¸ãƒƒã‚¯ãŒè¨ˆç”»é€šã‚Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã‚ˆã†ã¨ã—ãŸã‹ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

```python
# tests/application/use_cases/test_execute_plan.py (è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹å†…)
import pytest
from unittest.mock import MagicMock, call
# (MockPlanSubscriber, MockVehicleStateRepository, MockActuatorInterface ã‚’
#  ãƒ†ã‚¹ãƒˆç”¨ã«åˆ¥é€”å®šç¾©ã™ã‚‹æƒ³å®š)
# (ParkingPlan, ControlCommand ãªã©ã®Entityã‚‚ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå¿…è¦)

@pytest.mark.asyncio
async def test_UseCaseã¯Planã‚’å–å¾—ã—ã‚³ãƒãƒ³ãƒ‰ã‚’é †ç•ªã«å®Ÿè¡Œã™ã‚‹():
    # 1. Arrange (æº–å‚™): å…¨ã¦ã®ä¾å­˜å…ˆã‚’å½ç‰©(ãƒ¢ãƒƒã‚¯)ã«ã™ã‚‹
    mock_subscriber = MockPlanSubscriber()
    mock_repo = MockVehicleStateRepository()
    mock_actuator = MockActuatorInterface()

    # å½ã®å…¥åŠ›(ParkingPlan)ã‚’è¨­å®š
    cmd1 = ControlCommand(action='steer', value=30.0, duration=1.0)
    cmd2 = ControlCommand(action='throttle', value=-0.5, duration=2.0)
    mock_subscriber.set_plan(ParkingPlan(timestamp=datetime.now(), commands=[cmd1, cmd2]))

    # å½ã®å†…éƒ¨çŠ¶æ…‹(VehicleState)ã‚’è¨­å®š
    mock_repo.set_state(VehicleState())

    # 2. Act (å®Ÿè¡Œ)
    use_case = ExecutePlanUseCase(mock_subscriber, mock_repo, mock_actuator)
    await use_case.handle()

    # 3. Assert (æ¤œè¨¼)
    # æ„å›³: ã€ŒSubscriberã‹ã‚‰Planã‚’èª­ã¿(1)ã€Actuatorã«ã‚³ãƒãƒ³ãƒ‰ã‚’2å›(cmd1, cmd2)
    #       æ­£ã—ã„é †åºã§å®Ÿè¡ŒæŒ‡ç¤ºã—ãŸã‹(4)ï¼Ÿã€ã‚’ãƒ†ã‚¹ãƒˆ
    assert mock_subscriber.get_plan_called is True
    assert mock_actuator.execute_command.call_count == 2
    assert mock_actuator.execute_command.call_args_list == [
        call(cmd1),
        call(cmd2)
    ]
    # çŠ¶æ…‹ãŒ2å›ä¿å­˜ã•ã‚ŒãŸã‹ã‚‚æ¤œè¨¼ã§ãã‚‹
    assert mock_repo.save_called_count == 2

```

---

## ğŸ Pythonã¨Cè¨€èªã®æ¯”è¼ƒï¼ˆåˆå¿ƒè€…ã®æ–¹ã¸ï¼‰

ï¼ˆâ€»ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯èªè­˜ã‚µãƒ¼ãƒ“ã‚¹ã¨åŒã˜ä¸€èˆ¬è«–ã§ã™ï¼‰
Python (ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘): `ActuatorInterface`ã®ã‚ˆã†ãªæŠ½è±¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®šç¾©ã—ã€UseCaseã¯ãã‚Œã«ä¾å­˜ã—ã¾ã™ã€‚ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ï¼ˆ`StubActuatorAdapter`ï¼‰ãŒãã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€å…·ä½“çš„ãªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢åˆ¶å¾¡ã‚³ãƒ¼ãƒ‰ï¼ˆCANãƒã‚¹é€šä¿¡ãªã©ï¼‰ãŒUseCaseã‹ã‚‰éš è”½ã•ã‚Œã¾ã™ã€‚

Cè¨€èª (æ‰‹ç¶šãå‹): UseCaseç›¸å½“ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒã€`set_steering_angle(30.0)`ã®ã‚ˆã†ãªé–¢æ•°ã‚’ç›´æ¥å‘¼ã³å‡ºã™å½¢ã«ãªã‚ŠãŒã¡ã§ã™ã€‚ã“ã‚Œã ã¨ã€ç‰¹å®šã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ‰ãƒ©ã‚¤ãƒã«å¯†çµåˆã—ã¦ã—ã¾ã„ã€ãƒ†ã‚¹ãƒˆã§å½ç‰©ã«å·®ã—æ›¿ãˆãŸã‚Šã€å°†æ¥ã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°ã®ãƒ¡ãƒ¼ã‚«ãƒ¼ã‚’å¤‰æ›´ã—ãŸã‚Šã™ã‚‹ã®ãŒå›°é›£ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ›¡ï¸ ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã®é‰„å‰‡

**è»Šã‚’å‹•ã‹ã›ã€‚ãŸã ã—è¨ˆç”»ã¯ç«‹ã¦ã‚‹ãªã€‚** (Drive the car, but don't plan the path.)

è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹ã®è²¬å‹™ã¯ã€ã‚ãã¾ã§ã€Œæ¸¡ã•ã‚ŒãŸè¨ˆç”»ã€ã‚’å¿ å®Ÿã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã«é™å®šã•ã‚Œã¾ã™ã€‚
ã€Œã“ã®éšœå®³ç‰©ã‚’é¿ã‘ã‚‹ãŸã‚ã«ã€è¨ˆç”»ã‚’å¤‰æ›´ã—ã‚ˆã†ã€ã¨ã„ã£ãŸåˆ¤æ–­ã¯ã€å®Œå…¨ã«çµŒè·¯è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ã®è²¬å‹™ã§ã™ã€‚ã“ã®æ˜ç¢ºãªåˆ†é›¢ãŒã€ã‚·ã‚¹ãƒ†ãƒ ã®ä¿¡é ¼æ€§ã¨ãƒ†ã‚¹ãƒˆã®å®¹æ˜“æ€§ã‚’é«˜ã‚ã¾ã™ã€‚

---

## ğŸ”„ è»Šä¸¡åˆ¶å¾¡ã‚µãƒ¼ãƒ“ã‚¹ã®æ§‹æˆï¼ˆå¾©ç¿’ï¼‰

æœ€å¾Œã«ã‚‚ã†ä¸€åº¦ã€ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã®å…¨ä½“åƒã‚’æŒ¯ã‚Šè¿”ã‚Šã¾ã—ã‚‡ã†ã€‚

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
control_service/
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ entities.py         # [Entity] ParkingPlan(å¥‘ç´„), VehicleState ãªã©
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ boundaries.py       # [å¢ƒç•Œ] Subscriber/Actuator ãªã©ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â””â”€â”€ use_cases.py        # [UseCase] ExecutePlanUseCase ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ adapters/
â”‚   â”œâ”€â”€ file_subscriber.py  # [Adapterså±¤] FilePlanSubscriber (å…¥åŠ›å®Ÿè£…)
â”‚   â”œâ”€â”€ stub_actuator.py    # [Adapterså±¤] StubActuatorAdapter (å‡ºåŠ›å®Ÿè£…)
â”‚   â””â”€â”€ repositories.py     # [Adapterså±¤] InMemoryVehicleStateRepository (çŠ¶æ…‹å®Ÿè£…)
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ ...                 # (ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰)
â””â”€â”€ main.py                 # [èµ·å‹•] DIã‚³ãƒ³ãƒ†ãƒŠã€å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«

```

ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚‚ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®åŸå‰‡ã«å³å¯†ã«å¾“ã„ã¾ã—ãŸã€‚

1. **ä¸­å¿ƒ (Entity, UseCase)**:
    - `VehicleState` ã‚„ `ParkingPlan`ï¼ˆå¥‘ç´„ï¼‰ ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ï¼ˆ**Entity**ï¼‰ã‚’å®šç¾©ã—ã¾ã—ãŸã€‚
    - `ExecutePlanUseCase` ã¨ã„ã†ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ**UseCase**ï¼‰ã‚’å®šç¾©ã—ã¾ã—ãŸã€‚
2. **å¢ƒç•Œ (Interfaces)**:
    - UseCaseã¯ã€å…·ä½“çš„ãªãƒ•ã‚¡ã‚¤ãƒ«I/Oã‚„ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚’çŸ¥ã‚‹ä»£ã‚ã‚Šã«ã€3ã¤ã®æŠ½è±¡çš„ãªã€Œçª“å£ã€ï¼ˆ**Interfaces**ï¼‰ã‚’å®šç¾©ã—ã¾ã—ãŸã€‚
3. **å¤–å´ (Adapters)**:
    - 3ã¤ã®çª“å£ã«å¯¾å¿œã™ã‚‹ã€å…·ä½“çš„ãªã€Œé“å…·ã€ï¼ˆ**Adapters**ï¼‰ã‚’å®Ÿè£…ã—ã¾ã—ãŸï¼ˆ`FilePlanSubscriber`, `StubActuatorAdapter`ãªã©ï¼‰ã€‚
4. **çµ„ç«‹ ([main.py](http://main.py/))**:
    - æœ€å¾Œã«ã€`main.py`ãŒã€ŒUseCaseã€ã¨ã€ŒAdaptersã€ã‚’\*\*æ³¨å…¥ï¼ˆDIï¼‰\*\*ã«ã‚ˆã£ã¦çµåˆã—ã¾ã—ãŸã€‚

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€å…¥åŠ›ãŒãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`File...Subscriber`ï¼‰ã‹ã‚‰é€šä¿¡ã«å¤‰ã‚ã£ãŸã‚Šã€å‡ºåŠ›å…ˆãŒãƒ€ãƒŸãƒ¼ï¼ˆ`Stub`ï¼‰ã‹ã‚‰æœ¬ç‰©ã®CANãƒã‚¹åˆ¶å¾¡ï¼ˆ`CANDriverAdapter`ï¼‰ã«å¤‰ã‚ã£ãŸã‚Šã—ã¦ã‚‚ã€UseCaseã®ã‚³ãƒ¼ãƒ‰ã‚’ä¸€åˆ‡å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

---

æ¬¡ã¯ã€ã€Œæœ€çµ‚çµ±åˆï¼š3ã‚µãƒ¼ãƒ“ã‚¹ã‚’é€£æºã•ã›ã‚‹ã€ã«ã¤ã„ã¦è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚