# 1. 戦術的設計とは

# 🗺️ 戦略的設計とは？ **(Tactical Design)**

DDD（ドメイン駆動設計）の**戦略的設計**では、複雑なドメイン全体を「境界づけられたコンテキスト(BC)」に分割する方法を学びました。

次に学ぶ**戦術的設計 (Tactical Design)** は、その分割された**一つのBCの「内部」を、ドメインの概念を豊かに表現するために、どのようにモデル化（設計）していくかの具体的なパターン集**です。

---

## 🎯 戦術的設計の目的：表現豊かなドメインモデルの構築

戦術的設計の目的は、「**ドメインの知識やルールを、コード（ドメインモデル）の中に明確に、かつ豊かに表現すること**」です。

戦略的設計が「どこで区切るか」を決めるマクロな視点だったのに対し、戦術的設計は「区切られた内部をどう作るか」というミクロな視点を提供します。これにより、ドメインの複雑さをコードの中にうまくカプセル化し、ビジネスの変化に追従しやすい、保守性の高いモデルを構築することを目指します。

---

## 🧱 戦術的設計の構成要素（ビルディングブロック）

戦術的設計では、ドメインモデルを構築するための、以下のような基本的な「**ビルディングブロック**」（構成要素）と呼ばれるパターンが提供されています。

- **エンティティ (Entity)**:
同一性（ID）によって区別され、ライフサイクルを持つオブジェクト。（例：顧客、注文）
- **値オブジェクト (Value Object)**:
属性によって定義され、同一性を持たず、不変（Immutable）なオブジェクト。（例：住所、金額、色）
- **集約 (Aggregate)**:
データ変更の一貫性を保つための単位となる、エンティティと値オブジェクトのまとまり。外部からのアクセスは「集約ルート」と呼ばれる特定のエンティティを通じてのみ行われる。（例：「注文」集約、「商品」集約）
- **リポジトリ (Repository)**:
集約の永続化（DBへの保存・読み込み）を抽象化するインターフェース。
- **ドメインイベント (Domain Event)**:
ドメイン内で発生した重要な出来事を表すオブジェクト。（例：注文確定イベント、在庫切れイベント）
- **ドメインサービス (Domain Service)**:
特定のエンティティや値オブジェクトに属さない、ドメイン内の重要なプロセスや操作を表す。（例：振込処理サービス）
- **ファクトリ (Factory)**:
複雑なオブジェクト（特に集約）の生成ロジックをカプセル化する。

---

## ✅ クリーンアーキテクチャ(CA)との関係

これまでのCAの学習を通じて、私たちは既にこれらのビルディングブロックのいくつかに触れています。

- **エンティティ**: CAの最も内側の円「Entities」層で実装しました。
- **リポジトリ**: CAの `Adapters` 層と `UseCases` 層の境界として、「リポジトリインターフェース」を定義し、その実装を `Adapters` 層に配置しました。

戦術的設計を学ぶことで、これらの要素（特にエンティティ）をさらに洗練させるための「**値オブジェクト**」や「**集約**」といった新しい概念や、より複雑なドメインロジックを扱うための「**ドメインサービス**」や「**ドメインイベント**」といったパターンを理解することができます。

---

## 📖 このセクションの進め方

このセクションでは、上記のビルディングブロックを一つずつ取り上げ、その目的、特徴、そしてCAの実践の中でどのように活用できるか（あるいは既にしてきたか）を見ていきます。

---

## ➡️ 次へ

まずは、戦術的設計の基本となる「**エンティティ (Entity)**」について、CAでの実践と比較しながら復習し、その性質をより深く理解することから始めましょう。