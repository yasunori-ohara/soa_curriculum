# 02 Oï¼šã‚ªãƒ¼ãƒ—ãƒ³/ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã®åŸå‰‡

# ğŸ›ï¸ ç†è«–ç·¨ï¼šSOLIDåŸå‰‡ï¼ˆOï¼‰- ã‚ªãƒ¼ãƒ—ãƒ³/ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã®åŸå‰‡

SOLIDåŸå‰‡ã®2ç•ªç›®ã¯ã€ã€Œ**Oï¼šã‚ªãƒ¼ãƒ—ãƒ³/ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã®åŸå‰‡ (Open/Closed Principle)**ã€ã§ã™ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®**æŸ”è»Ÿæ€§**ã¨**ä¿å®ˆæ€§**ã‚’é«˜ã‚ã‚‹ä¸Šã§ã€éå¸¸ã«é‡è¦ãªè€ƒãˆæ–¹ã§ã™ã€‚
ä»¥é™ã€ã“ã®åŸå‰‡ã‚’ **OCP** ã¨å‘¼ã³ã¾ã™ã€‚

---

## â“ åŸå‰‡ã®å®šç¾©

> ã€Œã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆã‚¯ãƒ©ã‚¹ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€é–¢æ•°ãªã©ï¼‰ã¯ã€æ‹¡å¼µã«å¯¾ã—ã¦é–‹ã„ã¦ï¼ˆOpenï¼‰ãŠã‚Šã€ä¿®æ­£ã«å¯¾ã—ã¦é–‰ã˜ã¦ï¼ˆClosedï¼‰ã„ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚ã€
> 
> 
> \--- Bertrand Meyer (ã‚ªãƒªã‚¸ãƒŠãƒ«ã®æå”±)
> 
> \--- Robert C. Martin (ç¾ä»£çš„ãªè§£é‡ˆã«è²¢çŒ®)
> 

### ğŸ’¡ ç°¡å˜ã«è¨€ã†ã¨

ã€Œæ©Ÿèƒ½ã‚’è¿½åŠ ãƒ»å¤‰æ›´ã—ãŸã„ã¨ãã«ã€æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ãªã‚‹ã¹ãä¿®æ­£ã—ãªãã¦ã‚‚æ¸ˆã‚€ã‚ˆã†ã«è¨­è¨ˆã—ã‚ˆã†ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚æ–°ã—ã„æŒ¯ã‚‹èˆã„ã¯ã€Œè¿½åŠ ã€ã«ã‚ˆã£ã¦å®Ÿç¾ã—ã€æ—¢å­˜ã®å‹•ã„ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã«ã¯ã€Œè§¦ã‚‰ãªã„ã€ã®ãŒç†æƒ³ã§ã™ã€‚

### ğŸ¤” ãªãœé‡è¦ã‹ï¼Ÿ

æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã™ã‚‹ã«ã¯ã€å¸¸ã«ãƒªã‚¹ã‚¯ãŒä¼´ã„ã¾ã™ã€‚

1. **ãƒã‚°æ··å…¥ã®ãƒªã‚¹ã‚¯**:
ä¿®æ­£ã—ãŸç®‡æ‰€ã‚„ã€ãã®å½±éŸ¿ç¯„å›²ã«æ–°ãŸãªãƒã‚°ï¼ˆãƒ‡ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼‰ã‚’ç”Ÿã¿å‡ºã—ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
2. **ãƒ†ã‚¹ãƒˆã‚³ã‚¹ãƒˆã®å¢—åŠ **:
ä¿®æ­£ã—ãŸç®‡æ‰€ã ã‘ã§ãªãã€ãã®å½±éŸ¿ç¯„å›²å…¨ä½“ã®å†ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚
3. **é–‹ç™ºã‚¹ãƒ”ãƒ¼ãƒ‰ã®ä½ä¸‹**:
æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ç†è§£ã‚„ã€ä¿®æ­£ã«ã‚ˆã‚‹å½±éŸ¿èª¿æŸ»ã«æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚

æ–°ã—ã„æ©Ÿèƒ½ã‚„å¤‰æ›´ã‚’ã€Œè¿½åŠ ã€ã ã‘ã§å®Ÿç¾ã§ãã‚Œã°ã€ã“ã‚Œã‚‰ã®ãƒªã‚¹ã‚¯ã‚„ã‚³ã‚¹ãƒˆã‚’æœ€å°é™ã«æŠ‘ãˆã€æ—¢å­˜ã®å®‰å®šã—ãŸã‚³ãƒ¼ãƒ‰ã‚’å®ˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## âœ… ã“ã‚Œã¾ã§ã®å®Ÿè·µä¾‹ï¼ˆã©ã“ã§ä½¿ã£ãŸã‹ï¼‰

ã“ã®OCPã¯ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£(CA)ã®ã€Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¢ƒç•Œï¼‰ã€ã¨ã€Œä¾å­˜æ€§ã®æ³¨å…¥(DI)ã€ã«ã‚ˆã£ã¦ã€å¼·åŠ›ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

### ğŸ“Œ ã‚¢ãƒ€ãƒ—ã‚¿ã®å·®ã—æ›¿ãˆ (ç¬¬5å·¡)

- **å…·ä½“ä¾‹**: èªè­˜ã‚µãƒ¼ãƒ“ã‚¹ã§ã€å‡ºåŠ›ã‚¢ãƒ€ãƒ—ã‚¿ã‚’ `FileWorldModelPublisher` ã‹ã‚‰ `MqttWorldModelPublisher` ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚
- **ãªãœOCPã‹**: ã“ã®å¤‰æ›´ã‚’è¡Œã†éš›ã€`UpdateWorldModelUseCase` ã®ã‚³ãƒ¼ãƒ‰ã¯**ä¸€åˆ‡ä¿®æ­£ã—ã¾ã›ã‚“ã§ã—ãŸ**ã€‚`UseCase` ã¯ `PlanningServiceAdapterInterface` ã¨ã„ã†ã€ŒæŠ½è±¡ï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ã€ã«ä¾å­˜ã—ã¦ã„ã¾ã—ãŸã€‚æ–°ã—ã„ `MqttWorldModelPublisher` ã¯ã€ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã™ã‚‹å½¢ã§**è¿½åŠ **ã•ã‚Œã€`main.py` ã§æ³¨å…¥ã•ã‚Œã‚‹ã‚¢ãƒ€ãƒ—ã‚¿ãŒå·®ã—æ›¿ãˆã‚‰ã‚ŒãŸã ã‘ã§ã™ã€‚
`UseCase` ã¯ã€æ–°ã—ã„å…¬é–‹æ–¹æ³•ï¼ˆMQTTï¼‰ã¨ã„ã†ã€Œæ‹¡å¼µã€ã«å¯¾ã—ã¦ã¯**é–‹ã„ã¦**ãŠã‚Šã€æ—¢å­˜ã®å®Ÿè£…ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãå‡ºã—ï¼‰ã®å¤‰æ›´ã«å¯¾ã—ã¦ã¯**é–‰ã˜ã¦**ã„ãŸã®ã§ã™ã€‚
    
    ```
    UseCase -------> <I> PlanningServiceAdapterInterface <|------- FilePublisher (æ—§)
                                                       <|------- MqttPublisher (æ–°/è¿½åŠ )
    
    ```
    

### ğŸ“Œ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å¤‰æ›´ (ç¬¬2å·¡ å›³æ›¸é¤¨ã‚·ã‚¹ãƒ†ãƒ )

- **å…·ä½“ä¾‹**: ãƒ‡ãƒ¼ã‚¿ä¿å­˜å…ˆã‚’ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªDBã‹ã‚‰MongoDBã«å¤‰æ›´ã—ã¾ã—ãŸã€‚
- **ãªãœOCPã‹**: ã“ã®æ™‚ã‚‚ã€`BookRepositoryInterface` ã¨ã„ã†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯å¤‰æ›´ã›ãšã€`MongoBookRepository` ã¨ã„ã†æ–°ã—ã„å®Ÿè£…ã‚¯ãƒ©ã‚¹ã‚’**è¿½åŠ **ã—ã¾ã—ãŸã€‚`UseCase` ã¯ `BookRepositoryInterface` ã«ä¾å­˜ã—ã¦ã„ãŸãŸã‚ã€ä¿®æ­£ã¯ä¸è¦ã§ã—ãŸã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç¨®é¡ã¨ã„ã†ã€Œæ‹¡å¼µã€ã«å¯¾ã—ã¦**é–‹ã„ã¦**ãŠã‚Šã€æ—¢å­˜ã®ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªå®Ÿè£…ã®å¤‰æ›´ã«å¯¾ã—ã¦ã¯**é–‰ã˜ã¦**ã„ã¾ã—ãŸã€‚

### ğŸ“Œ DIï¼ˆä¾å­˜æ€§ã®æ³¨å…¥ï¼‰(ç¬¬1å·¡ã€œç¬¬5å·¡)

- **å…·ä½“ä¾‹**: ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã® `main.py` ã§ã€`UseCase` ã«å…·ä½“çš„ãªã‚¢ãƒ€ãƒ—ã‚¿ï¼ˆ`StubSensorAdapter`, `MqttPublisher` ãªã©ï¼‰ã‚’ `__init__` çµŒç”±ã§æ¸¡ã—ã¦ã„ã¾ã—ãŸã€‚
- **ãªãœOCPã‹**: DIã‚³ãƒ³ãƒ†ãƒŠï¼ˆä»Šå›ã¯ `main.py`ï¼‰ãŒä¾å­˜é–¢ä¿‚ã®è§£æ±ºï¼ˆã©ã®å®Ÿè£…ã‚’ä½¿ã†ã‹ï¼‰ã‚’æ‹…å½“ã™ã‚‹ã“ã¨ã§ã€`UseCase` ã¯å…·ä½“çš„ãªå®Ÿè£…ã‚¯ãƒ©ã‚¹ã‚’çŸ¥ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€`UseCase` ã‚’ä¿®æ­£ã™ã‚‹ã“ã¨ãªãã€`main.py` ã§æ³¨å…¥ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã€æŒ¯ã‚‹èˆã„ã‚’ã€Œæ‹¡å¼µã€ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## âŒ é–“é•ã£ãŸé©ç”¨ä¾‹ï¼ˆã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

ã‚ªãƒ¼ãƒ—ãƒ³/ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã®åŸå‰‡(OCP)ã«é•åã™ã‚‹ã¨ã€å¤‰æ›´ã®ãŸã³ã«æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£ãŒå¿…è¦ã«ãªã‚Šã€ãƒã‚°ã®ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã‚Šã¾ã™ã€‚

- **ä¾‹1ï¼šæ¡ä»¶åˆ†å²ã«ã‚ˆã‚‹æ©Ÿèƒ½è¿½åŠ **
æ–°ã—ã„æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ãŸã³ã«ã€æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã« `if/else` ã‚„ `switch` æ–‡ã‚’è¿½åŠ ã—ã¦ã„ããƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚
    
    ```python
    # ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ï¼šæ¡ä»¶åˆ†å²ã§ã®æ‹¡å¼µ
    class ReportGenerator:
        def generate(self, report_type, data):
            if report_type == "CSV":
                # CSVç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
                print("Generating CSV report...")
                return self._generate_csv(data)
            elif report_type == "PDF":
                # PDFç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
                print("Generating PDF report...")
                return self._generate_pdf(data)
            # æ–°ã—ã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¿½åŠ ã™ã‚‹å ´åˆã€ã“ã“ã« elif ã‚’è¿½åŠ ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
            # elif report_type == "JSON": <--- ä¿®æ­£ãŒå¿…è¦ï¼
            #     print("Generating JSON report...")
            #     return self._generate_json(data)
            else:
                raise ValueError("Unsupported report type")
    
        def _generate_csv(self, data): pass
        def _generate_pdf(self, data): pass
        # def _generate_json(self, data): pass # <- ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚è¿½åŠ ä¿®æ­£
    
    ```
    
    JSONå½¢å¼ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’è¿½åŠ ã—ãŸã„å ´åˆã€`generate` ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã€`_generate_json` ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸¡æ–¹ã‚’**ä¿®æ­£**ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
    
    **æ”¹å–„ç­–ï¼ˆOCPé©ç”¨ï¼‰**: Strategyãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆã¾ãŸã¯å˜ç´”ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…ï¼‰ã‚’ä½¿ã†ã€‚
    
    > Strategyãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã¯ï¼Ÿ ğŸ’¡
    Strategyï¼ˆæˆ¦ç•¥ï¼‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã€Œã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆæˆ¦ç•¥ï¼‰ã‚’ã‚¯ãƒ©ã‚¹ã¨ã—ã¦ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã€ãã‚Œã‚‰ã‚’äº¤æ›å¯èƒ½ã«ã™ã‚‹ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚
    ä»Šå›ã®ä¾‹ã§ã¯ã€ã€ŒCSVç”Ÿæˆã€ã€ŒPDFç”Ÿæˆã€ã€ŒJSONç”Ÿæˆã€ã¨ã„ã†å„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ã€å…±é€šã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆReportStrategyï¼‰ã‚’æŒã¤ç‹¬ç«‹ã—ãŸã‚¯ãƒ©ã‚¹ã¨ã—ã¦å®Ÿè£…ã—ã¾ã™ã€‚
    ã“ã‚Œã«ã‚ˆã‚Šã€ReportGenerator ã¯å…·ä½“çš„ãªç”Ÿæˆæ–¹æ³•ã‚’çŸ¥ã‚‰ãªãã¦ã‚‚ã€æ¸¡ã•ã‚ŒãŸ Strategy ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å‡¦ç†ã‚’ã€Œå§”è­²ã€ã™ã‚‹ã ã‘ã§ã‚ˆããªã‚Šã¾ã™ã€‚æ–°ã—ã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¿½åŠ ã—ãŸã„å ´åˆã¯ã€æ–°ã—ã„ Strategy ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§æ¸ˆã‚€ãŸã‚ã€OCPã‚’æº€ãŸã™ã“ã¨ãŒã§ãã¾ã™ã€‚
    > 
    
    ```python
    # OCPé©ç”¨ä¾‹ï¼šStrategyãƒ‘ã‚¿ãƒ¼ãƒ³
    from abc import ABC, abstractmethod
    
    class ReportStrategy(ABC): # æŠ½è±¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ (æˆ¦ç•¥ã®å…±é€šãƒ«ãƒ¼ãƒ«)
        @abstractmethod
        def generate(self, data): pass
    
    class CsvStrategy(ReportStrategy): # å…·ä½“çš„ãªæˆ¦ç•¥ã‚¯ãƒ©ã‚¹ (æ—¢å­˜)
        def generate(self, data): print("Generating CSV..."); return ...
    
    class PdfStrategy(ReportStrategy): # å…·ä½“çš„ãªæˆ¦ç•¥ã‚¯ãƒ©ã‚¹ (æ—¢å­˜)
        def generate(self, data): print("Generating PDF..."); return ...
    
    class JsonStrategy(ReportStrategy): # ğŸ‘ˆ æ–°ã—ã„æˆ¦ç•¥ã‚¯ãƒ©ã‚¹ã‚’ã€Œè¿½åŠ ã€ã™ã‚‹ã ã‘
        def generate(self, data): print("Generating JSON..."); return ...
    
    class ReportGenerator:
        def __init__(self, strategy: ReportStrategy): # DIã§æˆ¦ç•¥ã‚’å—ã‘å–ã‚‹
            self._strategy = strategy
    
        def generate(self, data):
            # æ—¢å­˜ã® generate ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¿®æ­£ä¸è¦ï¼
            # å®Ÿéš›ã®å‡¦ç†ã¯å§”è­²ã•ã‚ŒãŸ Strategy ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¡Œã†
            return self._strategy.generate(data)
    
    # åˆ©ç”¨å´ (main.py ãªã©) ã§å·®ã—æ›¿ãˆã‚‹
    # generator = ReportGenerator(CsvStrategy())
    generator = ReportGenerator(JsonStrategy()) # æ³¨å…¥ã™ã‚‹æˆ¦ç•¥ã‚’å¤‰ãˆã‚‹ã ã‘
    generator.generate(some_data)
    
    ```
    
    æ–°ã—ã„ `JsonStrategy` ã‚¯ãƒ©ã‚¹ã‚’**è¿½åŠ **ã™ã‚‹ã ã‘ã§ã€æ—¢å­˜ã® `ReportGenerator` ã‚„ä»–ã® Strategy ã‚¯ãƒ©ã‚¹ã‚’**ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“**ã€‚
    
- **ä¾‹2ï¼šå…·è±¡ã‚¯ãƒ©ã‚¹ã¸ã®ç›´æ¥ä¾å­˜**
ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆæŠ½è±¡ï¼‰ã§ã¯ãªãã€å…·ä½“çš„ãªå®Ÿè£…ã‚¯ãƒ©ã‚¹ã«ç›´æ¥ä¾å­˜ã—ã¦ã„ã‚‹å ´åˆã§ã™ã€‚
    
    ```python
    # ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ï¼šå…·è±¡ã‚¯ãƒ©ã‚¹ã¸ã®ä¾å­˜
    class NotificationService:
        def __init__(self):
            # å…·ä½“çš„ãª EmailSender ã‚¯ãƒ©ã‚¹ã«ç›´æ¥ä¾å­˜ï¼
            self.sender = EmailSender()
    
        def notify_user(self, user, message):
            self.sender.send(user.email, message)
    
    class EmailSender:
        def send(self, email, message): print(f"Sending Email to {email}: {message}")
    
    # --- ã‚‚ã—SMSé€šçŸ¥ã‚’è¿½åŠ ã—ãŸã„å ´åˆ ---
    # 1. SmsSender ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
    # 2. NotificationService ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼
    #    if user.prefers_sms:
    #        self.sms_sender = SmsSender() # <- ä¿®æ­£
    #        self.sms_sender.send(user.phone, message) # <- ä¿®æ­£
    #    else:
    #        self.sender.send(user.email, message)
    
    ```
    
    SMSé€šçŸ¥ã‚’è¿½åŠ ã—ãŸã„å ´åˆã€`NotificationService` ã® `__init__` ã‚„ `notify_user` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’**ä¿®æ­£**ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
    
    **æ”¹å–„ç­–ï¼ˆOCPé©ç”¨ï¼‰**: ä¾å­˜æ€§é€†è»¢ã®åŸå‰‡(DIP)ã¨DIã‚’ä½¿ã†ã€‚
    
    ```python
    # OCPé©ç”¨ä¾‹ï¼šDIP + DI
    from abc import ABC, abstractmethod
    
    class NotificationSender(ABC): # æŠ½è±¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
        @abstractmethod
        def send(self, recipient, message): pass
    
    class EmailSender(NotificationSender): # å®Ÿè£…ã‚¯ãƒ©ã‚¹ (æ—¢å­˜)
        def send(self, recipient, message): print(f"Sending Email to {recipient}: {message}")
    
    class SmsSender(NotificationSender): # ğŸ‘ˆ æ–°ã—ã„å®Ÿè£…ã‚¯ãƒ©ã‚¹ã‚’ã€Œè¿½åŠ ã€
        def send(self, recipient, message): print(f"Sending SMS to {recipient}: {message}")
    
    class NotificationService:
        def __init__(self, sender: NotificationSender): # ğŸ‘ˆ æŠ½è±¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä¾å­˜
            self.sender = sender
    
        def notify_user(self, user, message):
            # æ—¢å­˜ã® notify_user ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¿®æ­£ä¸è¦ï¼
            recipient = user.phone if isinstance(self.sender, SmsSender) else user.email # (ç°¡æ˜“çš„ãªåˆ¤å®š)
            self.sender.send(recipient, message)
    
    # åˆ©ç”¨å´ (main.py ãªã©) ã§å·®ã—æ›¿ãˆã‚‹
    # notifier = NotificationService(EmailSender())
    notifier = NotificationService(SmsSender()) # æ³¨å…¥ã™ã‚‹å®Ÿè£…ã‚’å¤‰ãˆã‚‹ã ã‘
    notifier.notify_user(some_user, "Hello!")
    
    ```
    
    æ–°ã—ã„ `SmsSender` ã‚¯ãƒ©ã‚¹ã‚’**è¿½åŠ **ã—ã€`main.py` ã§æ³¨å…¥ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã€`NotificationService` ã‚’**ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“**ã€‚
    

---

## ğŸ“ ã¾ã¨ã‚

ã‚ªãƒ¼ãƒ—ãƒ³/ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã®åŸå‰‡(OCP)ã¯ã€ã€Œ**å¤‰æ›´ã«å¼·ã„ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢**ã€ã‚’ä½œã‚‹ãŸã‚ã®éµã¨ãªã‚‹åŸå‰‡ã§ã™ã€‚

æ–°ã—ã„æ©Ÿèƒ½ã‚„å¤‰æ›´è¦æ±‚ãŒæ¥ãŸã¨ãã«ã€ã€Œã‚ˆã—ã€æ–°ã—ã„ã‚¯ãƒ©ã‚¹ï¼ˆã‚„é–¢æ•°ï¼‰ã‚’ã€è¿½åŠ ã€ã—ã‚ˆã†ã€ã¨è€ƒãˆã€ã€Œæ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ã€ä¿®æ­£ã€ã™ã‚‹ã®ã¯æœ€å¾Œã®æ‰‹æ®µã ã€ã¨æ€ãˆã‚‹ã‚ˆã†ã«ãªã‚Œã°ã€ã“ã®åŸå‰‡ã‚’ã†ã¾ãæ´»ç”¨ã§ãã¦ã„ã‚‹è¨¼æ‹ ã§ã™ã€‚

ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ãŠã‘ã‚‹\*\*ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¢ƒç•Œï¼‰**ã¨**ä¾å­˜æ€§ã®æ³¨å…¥ï¼ˆDIï¼‰\*\*ã¯ã€ã“ã®OCPã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®å¼·åŠ›ãªæ­¦å™¨ã¨ãªã‚Šã¾ã™ã€‚

---

## â¡ï¸ æ¬¡ã¸

æ¬¡ã¯ã€SOLIDåŸå‰‡ã®3ç•ªç›®ã€ã€Œ**Lï¼šãƒªã‚¹ã‚³ãƒ•ã®ç½®æ›åŸå‰‡**ã€ã«ã¤ã„ã¦è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚