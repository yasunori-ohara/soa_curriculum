# 1. 戦略的設計とは

## 🗺️ 戦略的設計とは？ (What is Strategic Design?)

戦略的設計は、**大規模で複雑なドメイン（ビジネスの問題領域）全体を理解し、それを管理可能な大きさの「境界づけられたコンテキスト (Bounded Context)」に分割するためのDDDのアプローチ**です。

**目的**は、ドメイン全体を無理に一つの巨大なモデルで表現しようとするのではなく、**モデルが有効で一貫性を持つ範囲（コンテキスト）を明確に区切り**、それぞれのコンテキスト間の**関係性を整理**することです。

**簡単に言うと**: 巨大で複雑な国（ドメイン）を、それぞれ独自の法律や文化（モデルや言語）を持つ「州」や「県」（境界づけられたコンテキスト）に分割し、その州同士の関係（連邦、同盟、貿易協定など）を地図（コンテキストマップ）に描くような活動です。

---

## 🤔 なぜ戦略的設計が必要か？ (Why is it important?)

ソフトウェアが扱うビジネスドメインが大きくなると、以下のような問題が起きます。

1. **モデルの矛盾**: 同じ「顧客」という言葉でも、営業部門とサポート部門では意味や関心事が違うように、ドメイン全体で完全に一貫した単一のモデルを作るのは非現実的であり、無理に作ろうとするとモデルが複雑化・矛盾しやすくなります。
2. **コミュニケーションの混乱**: チームや部門が異なると、同じ用語でも違う意味で使われ、誤解が生じやすくなります。
3. **巨大なモノリス**: ドメイン全体を一つのシステム（モノリシックアーキテクチャ）で扱おうとすると、開発チーム間の依存関係が強くなり、変更やデプロイが困難になります。

戦略的設計は、これらの問題を解決するために、**ドメインを意図的に分割**し、各部分の**独立性を高める**ことを目指します。

---

## 🧭 戦略的設計の主要な要素 (Key Elements)

戦略的設計は、主に以下の3つの要素（パターン）で構成されます。

### 1. ユビキタス言語 (Ubiquitous Language)

- **役割**: 各「境界づけられたコンテキスト」の**内部**で使われる、厳密に定義された共通言語。
- **ポイント**: ドメインエキスパートと開発者が協力して作り上げ、会話からコードまで一貫して使用します。**コンテキストが異なれば、ユビキタス言語も異なる**可能性があります（例：営業コンテキストの「商品」と在庫コンテキストの「商品」は違う言葉で定義されるべき）。

### 2. 境界づけられたコンテキスト (Bounded Context)

- **役割**: 戦略的設計の**核心**。特定のドメインモデル（と対応するユビキタス言語）が**一貫性を持ち、有効である明確な境界**。
- **ポイント**: この境界の「内側」では、モデルや言語の意味は一つに定まります。境界を越えると、同じ言葉でも意味が変わる可能性があります。ソフトウェアの設計（例：モジュール、パッケージ、サービス）は、この境界に沿って分割されるべきです。

### 3. コンテキストマップ (Context Map)

- **役割**: 異なる「境界づけられたコンテキスト」同士が**どのように関係しているか**を図示し、チーム間の連携方法を明確にするためのツール。
- **ポイント**: コンテキスト間の関係性には、いくつかのパターンがあります（例：**共有カーネル (Shared Kernel)** - 一部のモデルを共有する、**顧客/供給者 (Customer/Supplier)** - 一方が他方に依存する、**防腐層 (Anti-Corruption Layer)** - 外部システムのモデル変化から自身を守るための翻訳層を作る、など）。コンテキストマップは、これらの関係性を可視化し、適切な連携戦略を選択するのに役立ちます。
[Image showing a Context Map with relationship patterns]

---

## 🤝 SOA/マイクロサービスとの関係

戦略的設計は、**SOAやマイクロサービスアーキテクチャにおけるサービス分割の強力な指針**となります。

多くの場合、「**境界づけられたコンテキスト**」がそのまま**個々のマイクロサービス**の境界に対応します。DDDの戦略的設計を用いることで、「どこでサービスを分割すべきか？」という難しい問いに対して、ビジネスドメインに基づいた合理的な答えを見つけ出すことができます。

---

## 📝 まとめ

DDDの戦略的設計は、**複雑なドメインを理解し、分割し、管理するためのマクロな視点**を提供します。

- **ユビキタス言語**でコミュニケーションを明確にし、
- **境界づけられたコンテキスト**でモデルの一貫性を保つ範囲を区切り、
- **コンテキストマップ**でコンテキスト間の関係性を整理します。

これにより、ドメインの複雑さに効果的に立ち向かい、変更に強く、進化しやすいソフトウェアアーキテクチャ（特にSOAやマイクロサービス）を設計するための土台を築くことができます。