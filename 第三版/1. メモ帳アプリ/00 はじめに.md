# はじめに：クリーンアーキテクチャを「作りながら理解する」

![クリーンアーキテクチャ](../クリーンアーキテクチャ.png)

---

## 🎯 この教材の目的

この教材は、「**クリーンアーキテクチャを“理論”ではなく“実装”から理解する**」ことを目的としています。

最初に図を眺めて終わるのではなく、  
**1つ1つの層を実際にコードとして組み上げる**ことで、  
最後には自然と「依存性の向き」や「依存性の逆転（DIP）」の意味が体感できるようになります。

---

## 🧩 クリーンアーキテクチャとは何か

クリーンアーキテクチャは、ソフトウェアを「**変化に強く、保守しやすい構造にするための設計思想**」です。

その中心的な考え方は、たったひとつです。

> **外側は内側に依存してよいが、内側は外側を知らない。**

この原則を守ることで、UI・データベース・外部APIなどの技術的要素が変わっても、  
ビジネスルール（システムの本質的な価値）は壊れません。

---

## 🌀 依存の方向を表す「同心円モデル」

![クリーンアーキテクチャ・同心円](../クリーンアーキテクチャ・同心円.png)

同心円の図は、アーキテクチャの哲学を示しています。

| 層 | 意味 | 依存方向 |
|----|------|----------|
| **Entities** | ビジネスルール。最も安定した核。 | ← 他のすべてから参照される |
| **Use Cases** | アプリケーション固有のルール。 | → Entities のみを参照 |
| **Interface Adapters** | UIやデータ変換などの橋渡し層。 | → Use Cases |
| **Frameworks & Drivers** | WebフレームワークやDBなど技術的実装。 | → Interface Adapters |

矢印がすべて**内側に向かう**ことがポイントです。  
これが「依存性の方向」です。

---

## 🧱 教材の進め方

この教材では、次の順番で各層を実装していきます。

| ステップ | 層 | 学ぶこと | 関連図 |
|-----------|----|-----------|----------|
| 1 | **Entity** | ビジネスルールをコード化する |  |
| 2 | **UseCase** | アプリケーションロジックを追加 | |
| 3 | **Interface Adapter** | 外界との橋渡し（Controller / Presenter） |  |
| 4 | **Infrastructure** | DB・APIなど具体的実装を追加 |  |
| 5 | **Main（Composition Root）** | すべての層を接続してアプリを完成させる |  |
| 6 | **理論ページ（後半）** | 依存の逆転、ViewとControllerの関係を解説 | |

---

## 💡 題材について

題材はシンプルなものを使います。  
「ToDo管理」「メモ帳」「家計簿」「在庫管理」など、  
どの題材でも本質は同じです。

ここでは、**「メモ帳アプリ（Note Application）」**を題材にします。

- メモを作成・編集・削除できる  
- UIの形（CLI / Web）は後で選べる  
- まずは「ビジネスとしてのルール（＝メモとは何か）」を中心に作る  

---

## 🛠️ 学習スタイル

- **コメントを読むだけで図とコードの対応がわかる**ように設計されています。
- すべてのファイルには次のようなヘッダコメントが含まれます。

```python
# --------------------------------------------------------------------
# Entity 層に相当
# 図の中では「最も内側の円」に位置する部分。
# --------------------------------------------------------------------
```

## 🛠️ まとめ

コードを書いて動かしてみるだけで、
「依存の方向」や「抽象の位置」の意味が自然に理解できるようになります。

### この章のゴール
- クリーンアーキテクチャの全体像をつかむ
- 依存の方向（内向き）という思想を理解する
- 「メモアプリのEntity」を作る準備ができる状態にする



